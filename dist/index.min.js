import e,{useMemo as t,forwardRef as n,useState as a,useRef as l,useEffect as r,Fragment as c,useImperativeHandle as i,Children as s,createElement as o,memo as d}from"react";import{createBus as m,useBus as u,randomId as h}from"poon-router/util.js";import{navigation as p}from"poon-router";const v=new Array(12).fill(0),g=({size:t=16,color:n="#fff"})=>e.createElement("div",{className:"activity-indicator",style:{width:t,height:t},children:v.map(((a,l)=>{const r={width:1.7,borderRadius:1,left:t/2-1,height:t/4,animationDelay:(.1*l-1.1).toFixed(1)+"s",transform:`rotate(${30*l}deg)`,backgroundColor:n,transformOrigin:`50% ${t/2}px`};return e.createElement("div",{key:l,style:r})}))}),E=(...e)=>e.filter(Boolean).join(" "),f=e=>100*e+"%",b=(e,t,n)=>Math.min(Math.max(e,t),n),y=e=>Object.assign({},e),N=(e,t)=>Object.keys(e).every((n=>e[n]===t[n])),k=(e,t,n)=>e>n?n+(n+e)/50:e<t?t-(t-e)/50:e,x=e=>--e*e*e+1,C=(e,t)=>n=>b(n,e,t);class w{constructor(e,t){this.id=t,this.listeners=[],this.value=e,this.oldValue=e}setValue=(e,t=!0)=>{if(isNaN(e))return console.warn("Cant animate NaN");t&&(delete this.id,this.oldValue=e),this.value=e,this.listeners.forEach((t=>t(e)))};spring=(e,t=w.defaultAnimationDuration)=>new Promise((n=>{if(e===this.value)return;const a=this.id=performance.now(),l=this.value,r=c=>{if(a!==this.id)return;const i=Math.max(0,c-a);if(i>=t)this.setValue(e,!0),n();else{const n=(e-l)*x(i/t);this.setValue(l+n,!1),requestAnimationFrame(r)}};r(a)}));on=e=>(this.listeners.push(e),()=>this.listeners=this.listeners.filter((t=>t!==e)));stop=()=>{delete this.id}}w.defaultAnimationDuration=300;const M=e=>t((()=>new w(e)),[]),z=n((({href:t,onClick:n,className:r,active:c,target:i,children:s,style:o,disableMenu:d},m)=>{const[u,h]=a(!1),p=l(!1),v=e=>{e.button&&0!==e.button||(e.stopPropagation(),p.current=!1,h(!0))},g=()=>{h(!1)};return e.createElement(t?"a":"button",{href:t,onTouchStart:v,onTouchMove:g,onTouchEnd:g,onMouseDown:v,onMouseUp:g,onMouseLeave:g,onClick:e=>{if(p.current)return e.preventDefault();n&&(t||e.preventDefault(),n(e))},className:E("touchable",r,u&&"touched",d&&"disable-menu",c&&"active"),target:i,draggable:!1,onContextMenu:d?e=>(e.preventDefault(),!1):void 0,style:o,type:"button",ref:m},s)})),P=/iPad|iPhone|iPod/.test(navigator.platform),S={"os:back":P?"arrow_back_ios":"arrow_back","os:share":P?"ios_share":"share","os:close":P?"keyboard_arrow_down":"close"},L=({icon:t,className:n,color:a,title:l,size:r,onClick:c})=>e.createElement("i",{className:E("material-icons",n),style:{color:a,fontSize:r},title:l,onClick:c,children:S[t]||t}),$=({title:t,meta:n,leftIcon:a,href:l,onClick:r,onPressMore:c,target:i,children:s,caret:o,disabled:d,RightComponent:m,className:u,active:h})=>e.createElement(z,{className:E("touchable-highlight touchable-row",d&&"disabled",u),onClick:r,href:l,target:i,active:h},e.createElement("div",{className:"touchable-row-left"},"string"==typeof a?e.createElement("div",{className:"touchable-row-icon"},e.createElement(L,{icon:a})):null,"object"==typeof a?e.createElement("div",{className:"touchable-row-icon"},a):null,e.createElement("div",{className:"touchable-row-content"},t?e.createElement("div",{className:"touchable-row-title",children:t}):null,n?e.createElement("div",{className:"meta",children:n}):null,s)),m,c?e.createElement(z,{onClick:c},e.createElement(L,{icon:"more_vert"})):null,o?e.createElement(L,{icon:"chevron_right"}):null),T=e=>{const[t,n]=a({width:e.current?.clientWidth,height:e.current?.clientHeight});return r((()=>{if(!e.current)return;const t=new ResizeObserver((e=>{const t=e[0].borderBoxSize[0];n({height:t.blockSize,width:t.inlineSize})}));return t.observe(e.current),t.disconnect.bind(t)}),[]),t},V={capture:!1,passive:!1},D=(e=0,t,n)=>{const a=Math.min(n,50)/50;return e*(1-a)+t*a};let X;const Y=(e,t=0)=>({x:e.touches?e.touches[t].clientX:e.clientX,y:e.touches?e.touches[t].clientY:e.clientY}),R=(e,t={},n)=>{const{width:a,height:c}=T(e),i=l({}).current;return r((()=>{if(!e.current)return;const n=e=>{const t=e-i.last.ts;if(t>0){const n=(i.x-i.last.x)/t,a=(i.y-i.last.y)/t;i.v={x:D(i.v.x,n,t),y:D(i.v.y,a,t)},i.last={x:i.x,y:i.y,ts:e}}},l=e=>{if(2===e.touches.length){const t=Y(e,0),n=Y(e,1),a=t.x-n.x,l=t.y-n.y;return void(i.pinch={d0:Math.sqrt(Math.pow(a,2)+Math.pow(l,2))})}X=null;for(let e in i)delete i[e];const{x:n,y:l}=Y(e);Object.assign(i,{x:n,y:l,size:{x:a,y:c},width:a,height:c,locked:!1,touch:!1,origin:{x:n,y:l},d:{x:0,y:0},v:{x:0,y:0},s:{x:0,y:0},flick:null,last:{ts:e.timeStamp,x:n,y:l}}),t.onDown&&t.onDown(i)},r=a=>{if(!X||X===e.current){if(i.pinch){if(2===a.touches.length){i.locked="pinch";const e=Y(a,0),n=Y(a,1),l=e.x-n.x,r=e.y-n.y;i.pinch.d=Math.sqrt(Math.pow(l,2)+Math.pow(r,2)),t.onPinch&&t.onPinch({center:{x:(e.x+n.x)/2,y:(e.y+n.y)/2},scale:i.pinch.d/i.pinch.d0})}}else{const{x:e,y:t}=Y(a);if(i.x=e,i.y=t,n(a.timeStamp),i.d={x:i.x-i.origin.x,y:i.y-i.origin.y},!i.locked){const e=Math.abs(i.d.x),t=Math.abs(i.d.y);(t>10||e>10)&&(i.locked=t>e?"y":"x")}}i.locked&&("x"===i.locked?i.distance=i.d.x:"y"===i.locked&&(i.distance=i.d.y),i.touch||(i.touch=t.onCapture({direction:i.locked,distance:i.d[i.locked],size:i.size[i.locked],pinch:i.pinch})),i.touch&&(a.stopPropagation(),X=e.current,t.onMove&&t.onMove({d:i.d,direction:i.locked,distance:i.d[i.locked],velocity:i.v[i.locked],size:i.size[i.locked]},a)))}},s=a=>{if(a.touches.length>0)return;if(X&&X!==e.current)return;if(!i.touch)return;n(a.timeStamp);const l=i.v[i.locked],r=Math.abs(l),c=i.d[i.locked],s=i.size[i.locked];if(i.locked){const e=r>=.25&&Math.sign(l)||Math.abs(c)>s/2&&Math.sign(c);t.onUp&&t.onUp({flick:-1*e,flickMs:Math.min((s-Math.abs(c))/r,300),direction:i.locked,velocity:l,size:s})}},o=n=>{e.current.scrollTop+=n.deltaY,t.onPan&&t.onPan({x:{distance:n.deltaX,size:a},y:{distance:n.deltaY,size:c}})};return e.current.addEventListener("touchstart",l,V),e.current.addEventListener("touchmove",r,V),e.current.addEventListener("touchend",s,V),e.current.addEventListener("wheel",o,V),t.onDoubleTap&&e.current.addEventListener("dblclick",t.onDoubleTap,V),()=>{e.current&&(e.current.removeEventListener("touchstart",l),e.current.removeEventListener("touchmove",r),e.current.removeEventListener("touchend",s),e.current.removeEventListener("wheel",o),t.onDoubleTap&&e.current.removeEventListener("dblclick",t.onDoubleTap))}}),[e,c,a,n]),{height:c,width:a}},j=n((({className:t,visible:n,pan:a,children:c,onClose:i,onPress:s,showShade:o,showHandle:d},m)=>{const u=l(),h=l(),{height:p}=R(h,{onCapture:e=>"y"===e.direction,onMove:e=>{a.setValue(e.size-Math.max(e.distance/100,e.distance))},onUp:e=>{if(-1===e.flick)return a.spring(0,e.flickMs).then(i);a.spring(e.size)}});return r((()=>{if(p)return a.on((e=>{h.current.style.transform=`translateY(-${e}px)`,u.current&&(u.current.style.opacity=e/p)}))}),[p]),r((()=>{p&&(n?a.spring(p):a.spring(0).then(i))}),[n,p,i]),e.createElement("div",{className:"layer"},n&&o?e.createElement("div",{className:"shade shade-bottom-sheet",ref:u,onClick:()=>a.spring(0).then(i)}):null,e.createElement("div",{ref:h,className:E("sheet",t),onClick:s},d?e.createElement("div",{className:"handle"}):null,c))})),U=m(null),W=new w(0),I=()=>{const t=u(U);return t?e.createElement(j,{pan:W,visible:!!t,onClose:()=>U.update(null),showShade:!0},e.createElement("div",{className:"action-sheet-title"},t&&t.title),e.createElement("hr",null),t.options.map(((n,a)=>e.createElement($,{key:a,title:n.name,leftIcon:n.icon,onClick:e=>{n.onClick&&n.onClick(),t.callback&&t.callback(n.value),W.spring(0).then((()=>U.update(0)))},disabled:n.disabled,target:n.target,href:n.href})))):null},O=(e,t,n)=>U.update({title:e,options:t,callback:n}),_=({imageId:t,className:n,variant:a,getUrl:l})=>t?e.createElement("img",{draggable:!1,className:E("avatar",n),src:l(t,a)}):e.createElement("div",{draggable:!1,className:E("avatar",n)});_.defaultProps={variant:"normal",getUrl:()=>null};const H=n((({pull:t},n)=>e.createElement("div",{className:"pull-indicator center",ref:n},e.createElement(L,{icon:"refresh",color:"#000"})))),A=n((({children:t,className:n,onRefresh:a,horizontal:i},s)=>{const o=s||l(),d=l(),m=l({}).current,u=M(0),h=M(0);R(o,{onCapture:e=>"y"===e.direction?!!(a&&0===o.current.scrollTop&&e.distance>0)||!!m.canScrollVertical&&(0===m.initScrollTop&&e.distance<0||m.initScrollTop>0):"x"===e.direction?!!m.canScrollHorizontal:void 0,onDown(){m.canScrollVertical=o.current.scrollHeight>o.current.clientHeight,m.canScrollHorizontal=o.current.scrollWidth>o.current.clientWidth,m.initScrollTop=o.current.scrollTop,m.initScrollLeft=o.current.scrollLeft,h.stop()},onMove(e){"y"===e.direction?a&&0===m.initScrollTop?u.setValue(Math.min(70,e.distance)):h.setValue(m.initScrollTop-e.distance):"x"===e.locked&&h.setValue(m.initScrollLeft-e.distance)},onUp(e){"y"===e.direction?a&&0===m.initScrollTop?e.distance>70?u.spring(0).then(a):u.spring(0):e.velocity&&h.spring(h.value-2e3*e.velocity,2e3):"h"===e.direction&&e.velocity&&h.spring(h.value-2e3*e.velocity,2e3)}}),r((()=>h.on((e=>{i?o.current.scrollLeft=e:o.current.scrollTop=e}))),[]),r((()=>{if(a)return u.on((e=>{const t=e/70;d.current.style.transform=`translateY(${e}px) rotate(${360*t}deg)`,d.current.style.opacity=t}))}),[]);return e.createElement(c,null,a?e.createElement("div",{className:"list-pull"},e.createElement(H,{pull:u,ref:d})):null,e.createElement("div",{className:E("scroller",n,i?"horizontal":"vertical"),ref:o,onScroll:()=>{navigator.virtualKeyboard?.hide(),document.activeElement.blur()},children:t}))})),B=({className:t,title:n,onClick:a,onDown:l,icon:r,href:i,tabIndex:s,color:o,disabled:d,download:m,iconImageUrl:u,loading:h,submit:p,fullWidth:v,target:f})=>{const b=E("btn",t,d&&"disabled",v&&"full-width",o&&`btn-${o}`);return e.createElement(z,{type:p?"submit":"button",className:b,onClick:e=>{m&&e.stopPropagation(),a&&a(e)},href:i,onTouchStart:l,tabIndex:s,children:h?e.createElement(g,null):e.createElement(c,null,u?e.createElement("img",{src:u,alt:n}):null,r?e.createElement(L,{icon:r}):null,n?e.createElement("span",null,n):null),target:f})},F=m([]),q=(e,t)=>{F.update(F.state.map((t=>(t===e&&(t.visible=!1),t)))),setTimeout((()=>{e.callback(t),F.update(F.state.filter((t=>t!==e)))}),300)},K=({alert:t,isLast:n})=>e.createElement("div",{className:E("alert-container",n&&t.visible&&t.className)},e.createElement("div",{className:E("alert",n&&t.visible&&"visible"),onClick:e=>e.stopPropagation()},e.createElement("div",{className:"alert-top"},t.title?e.createElement("div",{className:"alert-title"},t.title):null,t.message?e.createElement("div",{className:"alert-message"},t.message):null),t.options?e.createElement(A,{className:E("alert-buttons",t.options.length<=2&&"alert-buttons-horizontal"),children:t.options.map(((n,a)=>e.createElement(z,{key:a,className:E("alert-button",n.destructive&&"destructive"),onClick:()=>{n.onPress&&n.onPress(),q(t,n._id||n.value)},children:n.name,disableMenu:!0})))}):e.createElement("div",{className:"alert-bottom"},e.createElement(B,{color:"white",fullWidth:!0,title:"Close",onClick:()=>q(t)})))),G=()=>{const t=u(F),n=t.filter((e=>e.visible)).pop();return 0===t.length?null:e.createElement("div",{className:E("layer alert-backdrop",t.some((e=>e.visible))&&"visible"),onClick:()=>q(n),children:t.map((t=>e.createElement(K,{key:t.key,alert:t,isLast:n===t})))})},J=(e,t)=>new Promise((n=>{F.update([...F.state,{key:h(),callback:n,visible:!0,options:t,...e}])})),Q={card:"os:back",modal:"os:close"},Z=({title:t,subtitle:n,presentation:a="card",onClose:l,headerRight:r,SearchComponent:i})=>{const s=Q[a];return e.createElement(c,null,e.createElement("div",{className:"header"},e.createElement("div",{className:"header-spacer"},s&&e.createElement(z,{className:"header-close",onClick:e=>{e.stopPropagation(),e.preventDefault(),l()},children:e.createElement(L,{icon:s})})),e.createElement("div",{className:"header-middle"},e.createElement("div",{className:"header-title"},t),n?e.createElement("div",{className:"header-subtitle"},n):null),e.createElement("div",{className:"header-spacer"},r)),i)},ee=({className:t,icon:n,title:a,message:l,children:r})=>e.createElement("div",{className:E("placeholder",t)},n?e.createElement(L,{icon:n}):null,a?e.createElement("div",{className:"title"},a):null,l?e.createElement("div",{className:"placeholder-message"},l):null,r),te=n((({},t)=>{const n=l();return i(t,(()=>({progress:(e,t)=>{n.current&&(n.current.style.opacity=1-e/t)}}))),e.createElement("div",{className:"shade shade-card",ref:n})})),ne=n((({title:t,subtitle:n,children:c,footer:i,headerRight:s,SearchComponent:o,disableGestures:d,onDrop:m,isVisible:u=!0,animateIn:h=!0,ShadeComponent:v=te,HeaderComponent:g,className:f},b)=>{b=b||l();const y=l(history.length>1).current,[N,k]=a(!1),x=l(),C=M(h?document.body.clientWidth:0),w=()=>C.spring(z).then((()=>{y&&p.goBack()})),{width:z}=R(b,{onCapture:e=>{if(y&&!d)return"x"===e.direction&&e.distance>0},onMove:e=>{C.setValue(Math.max(0,e.distance))},onUp:e=>{if(-1===e.flick)return w();C.spring(0)}});r((()=>{z&&h&&C.spring(u?0:z)}),[h,u,z]),r((()=>C.on((e=>{b.current&&(b.current.style.transform=`translateX(${e}px)`),x.current&&x.current.progress(e,z)}))),[z]);return e.createElement("div",{className:"layer"},v?e.createElement(v,{ref:x}):null,e.createElement("div",{className:E("card",h&&"animate",f),ref:b,onDragOver:m&&(e=>{e.preventDefault()}),onDragEnter:m&&(e=>{k(!0)}),onDragLeave:m&&(e=>{k(!1)}),onDrop:m&&(e=>{k(!1),m(e)})},null===g?null:g||e.createElement(Z,{title:t,subtitle:n,presentation:"card",SearchComponent:o,onClose:w,headerRight:s}),e.createElement("div",{className:"card-body",children:c}),i,N?e.createElement(ee,{className:"drop-zone",icon:"upload",title:"Upload"}):null))})),ae=({active:t})=>e.createElement("div",{className:E("circle-check",t&&"active")},e.createElement(L,{icon:"check"})),le=({status:t})=>"connected"===t?null:e.createElement("div",{className:"connection-indicator"},e.createElement("div",{className:"bubble"},e.createElement(g,null),t)),re=({title:t,children:n,isVisible:a,onClose:l})=>a?e.createElement("div",{className:"corner-dialog"},e.createElement("div",{className:"corner-dialog-title"},t,e.createElement(L,{icon:"close",onClick:l})),n):null,ce=({path:t,onClickPath:n})=>{const a=t.split("/").filter(Boolean);return 0===a.length?null:e.createElement(A,{horizontal:!0,className:"breadcrumbs"},e.createElement(L,{icon:"home",onClick:()=>n("/")}),e.createElement("span",null," / "),a.map(((t,l)=>e.createElement(c,{key:t+"_"+l},e.createElement(z,{onClick:()=>n(),children:t}),l<a.length-1?e.createElement("span",null," / "):null))))},ie=({active:t,undetermined:n})=>e.createElement("div",{className:E("toggle-check",t&&"active",n&&"undetermined")},e.createElement(L,{icon:n?"horizontal_rule":t?"check":null}));let se={};const oe=n((({children:t,title:n,headerRight:a,onClose:c,isVisible:s,animateIn:o,className:d},m)=>{const u=l(),h=l(),v=M(o?0:1),g=()=>p.goBack(1);i(m,(()=>({close:g})));const{width:b,height:y}=R(u,{onCapture:e=>"x"===e.direction&&e.distance>0,onMove(e){v.setValue(1-e.distance/e.size)},onUp(e){if(-1===e.flick)return g();v.spring(1)}});return r((()=>{o&&(s?v.spring(1):v.spring(0))}),[o,s]),r((()=>v.on((e=>{const t=1-e,n=se.x*t,a=se.y*t;u.current&&(u.current.style.transform=`translate(${n}px, ${a}px)`,u.current.style.width=f(e),u.current.style.height=f(e)),h.current&&(h.current.style.transform=`translate(${-1*n}px, ${-1*a}px)`)}))),[b,y]),e.createElement("div",{className:"layer reveal",ref:u},e.createElement("div",{className:E("card reveal-content",d),ref:h},e.createElement(Z,{title:n,onClose:g,headerRight:a,presentation:"card"}),e.createElement("div",{className:"card-body",children:t})))})),de=(e,t)=>Object.assign(se,{x:e,y:t}),me=e=>{const t=e.currentTarget.getBoundingClientRect();de((t.left+t.right)/2,(t.top+t.bottom)/2)},ue=({title:t,icon:n,href:a})=>e.createElement(z,{href:a,className:"springboard-icon",onClick:me},e.createElement("div",{className:"icon-frame"},e.createElement(L,{icon:n})),e.createElement("div",{className:"springboard-icon-name"},t)),he=({position:t,button:n,content:l})=>{const[c,i]=a(!1);return r((()=>{if(!c)return;const e=e=>{e.composedPath().some((e=>e.classList&&e.classList.contains("dropdown-content")))||i(!1)};return setTimeout((()=>{window.addEventListener("click",e,{passive:!1})}),0),()=>window.removeEventListener("click",e)}),[c]),e.createElement("div",null,e.createElement("span",{className:"dropdown"},e.createElement("div",{children:n,className:"dropdown-button",onClick:()=>{console.log("show"),i(!0)}}),e.createElement("div",{className:E("dropdown-content",t||"top-right",c?"visible":"hidden"),children:l})))},pe=({title:t,icon:n,onClick:a,href:l,disabled:r,children:c,active:i})=>e.createElement($,{className:"dropdown-item",onClick:a,disabled:r,active:i,children:c,href:l,leftIcon:n,title:t}),ve=({icon:t,title:n,loading:a,disabled:l,active:r=!0,href:i,onPress:s})=>e.createElement(z,{className:E("fab",!n&&"round"),loading:a,disabled:l,active:r,onClick:s,href:i},a?e.createElement(g,{color:"#000"}):e.createElement(c,null,e.createElement(L,{icon:t}),n&&e.createElement("div",{className:"fab-title"},n)));class ge{constructor(e){this.listeners=[],this.values=e,this.initialValues=y(e)}set=(e,t=!0)=>{Object.assign(this.values,e),t&&this.end(),this.listeners.forEach((e=>e(this.values)))};spring=(e,t=ge.defaultDuration)=>new Promise((n=>{if(N(e,this.values))return;const a=this.id=performance.now(),l=y(this.values),r=c=>{if(a!==this.id)return;const i=Math.max(0,c-a);if(i>=t)this.set(e,!0),n();else{const n=Object.keys(e).reduce(((n,a)=>(n[a]=l[a]+(e[a]-l[a])*x(i/t),n)),{});this.set(n,!1),requestAnimationFrame(r)}};r(a)}));on=e=>(this.listeners.push(e),()=>this.listeners=this.listeners.filter((t=>t!==e)));stop=()=>{delete this.id};end=()=>{delete this.id,this.initialValues=y(this.values)}}ge.defaultDuration=300;const Ee=e=>t((()=>new ge(e)),[]),fe=({children:t,onClose:n})=>{const a=l(null),c=Ee({zoom:1,panX:0,panY:0});r((()=>c.on((e=>{a.current.style.transform=`scale(${e.zoom}) translateX(${e.panX/e.zoom}px) translateY(${e.panY/e.zoom}px)`}))),[]);const i=()=>{const e=a.current.querySelector("img"),t=e.clientWidth*c.values.zoom,n=e.clientHeight*c.values.zoom;return{maxPanX:t>a.current.clientWidth?(t-a.current.clientWidth)/2:0,maxPanY:n>a.current.clientHeight?(n-a.current.clientHeight)/2:0}};return R(a,{onCapture(e){const{maxPanX:t,maxPanY:n}=i();return"x"===e.direction&&t>0||("y"===e.direction&&n>0||!!e.pinch)},onPinch(e){const{maxPanX:t,maxPanY:n}=i(),a=c.initialValues.zoom*e.scale;c.set({zoom:a,panX:b(c.initialValues.panX,-t,t),panY:b(c.initialValues.panY,-n,n)},!1)},onMove(e){if(c.values.zoom<=1)return;const{maxPanX:t,maxPanY:n}=i();c.set({panX:t&&b(c.initialValues.panX+e.d.x,-t,t),panY:n&&b(c.initialValues.panY+e.d.y,-n,n)},!1)},onUp:e=>c.values.zoom<1?c.spring({zoom:1,panX:0,panY:0}):c.values.zoom>3?c.spring({zoom:3}):void c.end(),onDoubleTap(){1===c.values.zoom?c.spring({zoom:3}):c.spring({zoom:1,panX:0,panY:0})}},[]),e.createElement("div",{className:"gallery-item",ref:a,children:t})},be=({emoji:t})=>e.createElement("span",{className:"emoji",children:t}),ye=({title:t,children:n,footer:a,headerRight:c,SearchComponent:i})=>{const s=l(),o=M(0);return r((()=>(o.spring(1),o.on((e=>{s.current.style.opacity=e})))),[]),e.createElement("div",{className:"fullscreen",ref:s},e.createElement(Z,{title:t,presentation:"full",onClose:()=>{o.spring(0).then((()=>p.goBack()))},headerRight:c,SearchComponent:i}),e.createElement(A,{className:"card-body"},n),a)},Ne=({icon:t,title:n,badge:a,loading:l,disabled:r,onClick:c,active:i,href:s})=>e.createElement(z,{className:E("header-button center","Cancel"===n&&"header-cancel"),onClick:c,loading:l,disabled:r,active:i,href:s},t?e.createElement(L,{icon:t}):null,n?e.createElement("span",null,n):null,a?e.createElement("span",{className:"badge"},a):null),ke=({ar:t,url:n,alt:a,className:l,children:r,base64Png:c})=>e.createElement("div",{className:E("img",l)},e.createElement("div",{style:{paddingTop:100*(t||1)+"%"}}),n?e.createElement("img",{src:n,className:"img-real",alt:a,draggable:!1}):c?e.createElement("img",{src:`data:image/png;base64,${c}`}):e.createElement("div",{className:"img-real",alt:a,draggable:!1}),r?e.createElement("div",{className:"img-inside"},r):null),xe=({title:t,items:n=[],keyExtractor:a=(e=>e._id),renderItem:l,loading:r,className:i,ListEmptyComponent:o,HeaderComponent:d,children:m,showSeparators:u=!0})=>e.createElement("div",{className:E("list",i)},t?e.createElement(c,null,e.createElement("div",{className:"list-title"},t),e.createElement("hr",null)):null,d,n.length||m?e.createElement("div",{className:"list-body"},r||!n?null:o&&0===n.length?o:n.map(((t,r)=>e.createElement(c,{key:a(t)},l(t,r),u&&r<n.length-1&&e.createElement("hr",null)))),s.map(m,((t,n)=>e.createElement(c,{key:n},t,n<m.length-1&&e.createElement("hr",null))))):o),Ce=m([]),we=t=>e.createElement("div",{key:t.id,className:"layer",children:t.children}),Me=()=>u(Ce).map(we),ze=e=>Ce.update([...Ce.state,{id:Math.random(),children:e}]),Pe=()=>{Ce.update([])},Se=({title:t,color:n,onClick:a})=>e.createElement(z,{className:"pill",onClick:a,style:{backgroundColor:n}},t),Le=({title:t,LeftComponent:n,caret:a=!0,checked:l,active:r,href:c,onPress:i})=>e.createElement(z,{className:"filter-button",onClick:i,active:r,interactive:!0,href:c},n,t?e.createElement("div",{className:"filter-button-title"},t):null,a?e.createElement(L,{className:"filter-button-caret",icon:"expand_more"}):e.createElement(ie,{active:l})),$e=({percent:t})=>e.createElement("div",{className:"percent-bar"},e.createElement("div",{className:"percent-bar-inner",style:{width:100*t+"%"}})),Te=m(),Ve=()=>{const t=u(Te);return r((()=>{if(!t)return;const e=setTimeout((()=>Te.update(null)),2e3);return()=>clearTimeout(e)}),[t]),t?e.createElement("div",{className:"toast-container"},e.createElement("div",{className:"toast",children:t})):null},De=Te.update,Xe=()=>e.createElement(c,null,e.createElement(Me,null),e.createElement(I,null),e.createElement(G,null),e.createElement(Ve,null)),Ye=()=>e.createElement("div",{className:"progress-indicator"}),Re=({color:t="#fff",size:n=20,percent:a,spinning:l,completedIcon:r="check"})=>{if(l||!a)return e.createElement(Ye,null);if(1===a)return e.createElement(L,{icon:r});const c=n/2,i=c-1,s=2*i*Math.PI,o=s-a*s;return e.createElement("svg",{height:n,width:n},e.createElement("circle",{stroke:t,opacity:.3,fill:"transparent",strokeWidth:2,r:i,cx:c,cy:c}),e.createElement("circle",{strokeDasharray:s+" "+s,style:{strokeDashoffset:o,transform:"rotate(-90deg)",transformOrigin:"50% 50%"},stroke:t,fill:"transparent",strokeWidth:2,r:i,cx:c,cy:c}))},je=({active:t,icon:n,title:a,elaboration:l,subtitle:r,value:c,disabled:i,onClick:s,children:o})=>e.createElement($,{onClick:()=>{s(c)},disabled:i,className:"radio-btn",active:t},e.createElement("div",{className:"radio-top"},e.createElement("div",{className:"dot"},e.createElement("div",{className:"dot-inside"})),n&&e.createElement(L,{icon:n}),e.createElement("div",{className:"radio-title"},a)),o&&e.createElement("div",{className:"radio-subtitle"},o),r&&e.createElement("div",{className:"radio-subtitle"},r),t&&l&&e.createElement("div",{className:"radio-subtitle",children:l})),Ue=n((({item:t,isLast:n,active:a,onChange:l,index:r},i)=>e.createElement(c,null,e.createElement(z,{children:t.name,onClick:()=>l(t.value),active:a,ref:i}),n?null:e.createElement("div",{className:"separator"})))),We=({options:t,value:n,onChange:a})=>{const c=l([]),i=l(),s=t.findIndex((e=>e.value===n)),o=M(0),d=M(0);return r((()=>{o.on((e=>i.current.style.transform=`translateX(${e}px)`)),d.on((e=>i.current.style.width=`${e}px`))}),[]),r((()=>{const e=c.current[s];0===d.value?(o.setValue(e.offsetLeft),d.setValue(e.offsetWidth)):(o.spring(e.offsetLeft),d.spring(e.offsetWidth))}),[s]),e.createElement("div",{className:"segmented"},e.createElement("div",{className:"segmented-indicator",ref:i}),t.map(((n,l)=>e.createElement(Ue,{key:n.value,item:n,index:l,isLast:l===t.length-1,active:s===l,onChange:a,ref:e=>c.current[l]=e}))))},Ie=({options:t,value:n,disabled:a,autoComplete:l,onChangeValue:r})=>e.createElement("select",{className:E("text select",a&&"disabled"),onChange:e=>r(e.target.value),value:n,disabled:a,autoComplete:l},(()=>{if(t instanceof Array)return t.map((t=>e.createElement("option",{key:t.value,value:t.value,children:t.name})));Object.keys(t).map((n=>e.createElement("option",{key:n,value:n,children:t[n]})))})()),Oe={code:"one-time-code"},_e={phone:"tel",code:"tel"},He=n((({placeholder:t,value:n="",icon:l,type:r="text",dnt:c,disabled:i,rows:s=0,className:d,onFocus:m,autoComplete:u,onClick:h,maxLength:p,id:v,onChangeText:f=(()=>null),autoFocus:b,loading:y,RightComponent:N,countryCode:k,onChangePhone:x,lowerCase:C,min:w,max:M,onPressCountry:P,countries:S},$)=>{const[T,V]=a(n);return e.createElement("div",{className:"text-input"},"phone"===r&&(()=>{const t=S?S.find((e=>e.code===k)):null;return t?e.createElement(z,{className:"text-input-country",onClick:P},e.createElement("span",{className:"emoji"},t.flag),t.prefix):null})(),l?e.createElement(L,{className:"text-input-icon",icon:l}):"username"===r?e.createElement("span",{className:"text-input-icon"},"@"):"search"===r?e.createElement(L,{className:"text-input-icon",icon:"search"}):void 0,o("textarea"===r||s?"textarea":"input",{type:_e[r]||r,autoComplete:Oe[r],maxLength:p,className:E("text",i&&"disabled",c&&"fs-hide",d),readOnly:i,onChange:e=>{let t=e.target.value;V(t),"phone"===r?t=t.replace(/[^0-9]/g,""):(C&&(t=t.toLowerCase()),p&&(t=t.slice(0,p)),"username"===r&&(t=t.replace(/\s/g,""))),f(t)},value:(e=>{if("phone"===r&&k){const t=S.find((e=>e.code===k)),n=e.split("");return t.example.split("").map((e=>{if(n.length)return"X"===e?n.shift():e})).filter(Boolean).join("")}return e})(n),autoCapitalize:C&&"none",placeholder:t,rows:s,onFocus:m,onClick:h,id:v,autoFocus:b,ref:$,min:w,max:M}),l?e.createElement("img",{className:"text-input-icon",src:l}):null,N,y?e.createElement("div",{className:"text-input-spinner"},e.createElement(g,{size:18})):null,"search"!==r?null:n?e.createElement(z,{onClick:()=>f("")},e.createElement(L,{icon:"cancel",className:"text-input-clear"})):void 0)})),Ae=({leftText:t,rightText:n})=>e.createElement("div",{className:"tabular-row"},e.createElement("div",{className:"tabular-row-left"},t),e.createElement("div",{className:"tabular-row-right"},n)),Be=({pan:t,i:n})=>{const a=l();return r((()=>t.on((e=>{const t=Math.abs(n-e);a.current.style.opacity=Math.max(.5,1-t)}))),[]),e.createElement("div",{className:"pager-dot",ref:a,style:{opacity:t.value===n?1:.5}})},Fe=({title:t,i:n,pan:a,onPress:c})=>{const i=l();return r((()=>a.on((e=>{const t=Math.abs(n-e);i.current.style.opacity=Math.max(.5,1-t)}))),[]),e.createElement("div",{children:t,className:"pager-tabs-title",onClick:()=>c(n),ref:i,style:{opacity:a.value===n?1:.5}})},qe=n((({titles:t,children:n,vertical:a,dots:c,className:o,page:d=0},m)=>{const u=M(d),h=l(),p=l(),v=l({}).current,g=s.count(n)-1,b=a?"y":"x",y=C(0,g);i(m,(()=>({scrollToPage:e=>u.spring(y(e))})));const{width:N,height:k}=R(p,{pointerControls:!0,onCapture(e){if(e.direction===b)return e.distance<0||v.initPan-e.distance/e.size>0},onDown(e){v.currentPage=Math.round(u.value),v.initPan=u.value},onMove(e){const t=y(v.initPan-e.distance/e.size);u.setValue(t)},onPan(e){const t=e[b],n=u.value-t.distance/t.size;u.setValue(y(n))},onUp(e){if(e.flick){const t=y(v.currentPage+e.flick);u.spring(t,e.flickMs)}else{const e=y(Math.round(u.value));u.spring(e)}}},[n]);return r((()=>{u.spring(d)}),[d]),r((()=>u.on((e=>{p.current.style.transform=a?`translateY(-${e*k}px)`:`translateX(-${e*N}px)`,h.current&&(h.current.style.transform=`translateX(${f(e)})`)}))),[a,k,N]),e.createElement("div",{className:E("pager",a?"vertical":"horizontal",o)},t?e.createElement("div",{className:"pager-tabs"},t.map(((t,n)=>e.createElement(Fe,{key:n,title:t,pan:u,i:n,onPress:u.spring}))),N?e.createElement("div",{className:"pager-tabs-indicator",ref:h,style:{width:f(1/t.length)}}):null):null,e.createElement("div",{className:"pager-scroller"},e.createElement("div",{className:"pager-canvas",ref:p,style:{transform:a?`translateY(-${f(d)})`:`translateX(-${f(d)})`}},s.map(n,((t,n)=>e.createElement("div",{key:n,className:"pager-page",children:t}))))),c?e.createElement("div",{className:"pager-dots"},s.map(n,((t,n)=>e.createElement(Be,{key:n,pan:u,i:n})))):null)})),Ke=n((({children:t,title:n,search:a,onChangeSearch:c,searchLoading:s,headerRight:o,onClose:d,isVisible:m,presentation:u="modal"},h)=>{const v=l(),g=l(),E=M(0),f=()=>{d?E.spring(0).then(d):p.goBack(1)};i(h,(()=>({close:f})));const{height:b}=R(g,{onCapture:e=>"y"===e.direction&&e.distance>0,onMove:e=>{E.setValue(b-Math.max(0,e.distance))},onUp:e=>{if(-1===e.flick)return f();E.spring(e.size)}});return r((()=>{b&&(m||d?E.spring(b):E.spring(0))}),[m,b]),r((()=>{const e=document.querySelectorAll(".card");return E.on((t=>{const n=t/b;g.current&&(g.current.style.transform=`translateY(-${t}px)`),v.current&&(v.current.style.display=t?"block":"none",v.current.style.opacity=t/b),[...e].forEach((e=>{e.style.transform=`scale(${1-.04*n})`}))}))}),[b]),e.createElement("div",{className:"layer"},e.createElement("div",{className:`shade shade-${u}`,ref:v}),e.createElement("div",{className:`window window-${u}`,ref:g},"modal"===u?e.createElement(Z,{title:n,presentation:"modal",onClose:f,SearchComponent:c?e.createElement("div",{className:"header-search"},e.createElement(He,{placeholder:"Search",type:"search",value:a,onChangeText:c,loading:s})):null,headerRight:o}):null,e.createElement("div",{className:"card-body",children:t})))})),Ge=({href:t,onClick:n,children:a,disabled:l,className:r})=>e.createElement(z,{className:E("touchable-highlight",l&&"disabled",r),onClick:n,href:t,children:a}),Je=(e,t=0)=>{let n=3735928559^t,a=1103547991^t;for(let t,l=0;l<e.length;l++)t=e.charCodeAt(l),n=Math.imul(n^t,2654435761),a=Math.imul(a^t,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(a^a>>>13,3266489909),a=Math.imul(a^a>>>16,2246822507),a^=Math.imul(n^n>>>13,3266489909),4294967296*(2097151&a)+(n>>>0)},Qe=360/Math.pow(2,53),Ze=d((({tag:t,count:n})=>{const a=(e=>`hsl(${180-Qe*Je(e)}, 100%, 50%)`)(t);return e.createElement("div",{className:"tag",style:{borderColor:a,color:a},children:`${t}  ${n||""}`})})),et=new Map,tt=e=>function(...t){const n=t[0];return et.has(n)||et.set(n,e.apply(this,t)),et.get(n)},nt=tt((e=>new Promise((t=>{const n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n.onload=()=>t(),document.head.appendChild(n)})))),at=tt(((e,t)=>new Promise((n=>{const a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,a.onload=()=>n(window[t]),document.head.appendChild(a)})))),lt=({width:e,height:t})=>{document.documentElement.style.setProperty("--viewport-width",`${e}px`),document.documentElement.style.setProperty("--viewport-height",`${t}px`)};lt({width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}),new ResizeObserver((e=>{lt(e[0].contentRect)})).observe(document.documentElement);const rt=navigator.virtualKeyboard,ct=()=>r((()=>{if(rt)return rt.overlaysContent=!0,()=>rt.overlaysContent=!1}),[]);export{I as ActionSheet,g as ActivityIndicator,G as Alert,w as AnimatedValue,ge as Animation,_ as Avatar,j as BottomSheet,ce as BreadCrumbs,B as Button,ne as Card,ie as CheckBox,ae as CircleCheck,le as ConnectionIndicator,re as CornerDialog,ue as DashboardIcon,he as Dropdown,pe as DropdownItem,be as Emoji,ve as Fab,Le as FilterButton,ye as FullScreen,fe as GalleryItem,Ne as HeaderButton,L as Icon,ke as Image,xe as List,Me as Modal,$e as PercentBar,Se as Pill,ee as Placeholder,Xe as PoonOverlays,Ye as ProgressIndicator,Re as ProgressRing,H as PullIndicator,je as RadioButton,oe as Reveal,Z as ScreenHeader,A as ScrollView,We as SegmentedController,Ie as Select,te as Shade,Ae as TabularRow,Ze as Tag,He as TextInput,Ve as Toast,z as Touchable,Ge as TouchableHighlight,$ as TouchableRow,qe as ViewPager,Ke as Window,k as bounce,E as c,b as clamp,y as clone,C as createClamp,Je as cyrb53,x as easeOutCubic,Pe as hideModal,nt as loadCss,at as loadScript,tt as memoize,Ce as modalState,N as sameObject,de as setRevealOrigin,O as showActionSheet,J as showAlert,ze as showModal,f as toPercent,De as toast,M as useAnimatedValue,Ee as useAnimation,R as useGesture,T as useSize,ct as useVirtualKeyboard};
