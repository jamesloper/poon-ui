import e,{useState as t,useRef as n,useEffect as l,useMemo as a,forwardRef as r,Fragment as c,useImperativeHandle as i,Children as s,memo as o}from"react";import{randomId as d,createBus as m,useBus as h}from"poon-router/util.js";import{navigation as u}from"poon-router";const p=new Array(5),v=({size:t=16,color:n="#fff"})=>e.createElement("div",{className:"activity-indicator",style:{width:t,height:t},children:p.map(((l,a)=>{const r={width:1.7,borderRadius:1,left:t/2-1,height:t/4,animationDelay:(.1*a-1.1).toFixed(1)+"s",transform:`rotate(${30*a}deg)`,backgroundColor:n,transformOrigin:`50% ${t/2}px`};return e.createElement("div",{key:a,style:r})}))}),g=(...e)=>e.filter(Boolean).join(" "),E=e=>100*e+"%",f=({href:l,onClick:a,className:r,target:c,children:i,disableMenu:s})=>{const[o,d]=t(!1),m=n(!1),h=e=>{e.button&&0!==e.button||(e.stopPropagation(),m.current=!1,d(!0))},u=()=>{d(!1)};return e.createElement(l?"a":"button",{href:l,onTouchStart:h,onTouchMove:u,onTouchEnd:u,onMouseDown:h,onMouseUp:u,onMouseLeave:u,onClick:e=>{if(m.current)return e.preventDefault();a&&(l||(e.preventDefault(),e.stopPropagation()),a(e))},className:g("touchable",r,o&&"active",s&&"disable-menu"),target:c,draggable:!1,onContextMenu:s?e=>(e.preventDefault(),!1):void 0},i)},y=/iPad|iPhone|iPod/.test(navigator.platform),b={"os:back":y?"arrow_back_ios":"arrow_back","os:share":y?"ios_share":"share","os:close":y?"keyboard_arrow_down":"close"},N=({icon:t,className:n,color:l,title:a,size:r,onClick:c})=>e.createElement("i",{className:g("material-icons",n),style:{color:l,fontSize:r},title:a,onClick:c,children:b[t]||t}),k=.25,C={capture:!1,passive:!1},w=(e=0,t,n)=>{const l=Math.min(n,50)/50;return e*(1-l)+t*l},x=e=>{const[n,a]=t({width:e.current?.clientWidth,height:e.current?.clientHeight});return l((()=>{if(!e.current)return;const t=new ResizeObserver((e=>{const t=e[0].borderBoxSize[0];a({height:t.blockSize,width:t.inlineSize})}));return t.observe(e.current),()=>t.disconnect()}),[e.current]),n};let M;const P=(e,t={},r)=>{const{width:c,height:i}=x(e),s=n({id:d()}).current,o=a((()=>{if(!e.current)return{};const n=()=>{const e=Date.now(),t=e-s.last.ts;if(t>0){const n=(s.x-s.last.x)/t,l=(s.y-s.last.y)/t;s.v={x:w(s.v.x,n,t),y:w(s.v.y,l,t)},s.last={x:s.x,y:s.y,ts:e}}};return{onTouchStart:e=>{if(M=null,e.touches.length>1){const t=e.touches[0].clientX-e.touches[1].clientX,n=e.touches[0].clientY-e.touches[1].clientY;return void(s.pinch={d0:Math.sqrt(Math.pow(t,2)+Math.pow(n,2))})}const n=e.touches?e.touches[0].clientX:e.clientX,l=e.touches?e.touches[0].clientY:e.clientY;Object.assign(s,{width:c,height:i,current:{x:n,y:l},touch:!0,origin:{x:n,y:l},locked:!1,v:{x:0,y:0},s:{x:0,y:0},d:{x:0,y:0},flick:null,last:{ts:Date.now(),x:n,y:l}}),t.onDown&&t.onDown(s)},onTouchMove:l=>{if(M&&M!==e.current)M.className.includes("scroller")||l.preventDefault();else{if(s.pinch)if(2===l.touches.length){const e=l.touches[0].clientX-l.touches[1].clientX,t=l.touches[0].clientY-l.touches[1].clientY;s.pinch.d=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),s.pinch.ratio=s.pinch.d/s.pinch.d0}else delete s.pinch;if(s.x=l.touches?l.touches[0].clientX:l.clientX,s.y=l.touches?l.touches[0].clientY:l.clientY,n(),s.d={x:s.x-s.origin.x,y:s.y-s.origin.y},s.abs={x:Math.abs(s.d.x),y:Math.abs(s.d.y)},!s.locked&&(s.abs.y>10||s.abs.x>10)&&(s.locked=s.abs.y>s.abs.x?"v":"h"),!s.locked)return l.preventDefault();s.touch=(e=>!t.onCapture||t.onCapture(s,e))(l),s.touch&&(M=e.current,s.locked&&t.onMove&&t.onMove(s,l))}},onTouchEnd:()=>{M&&M!==e.current||s.touch&&s.locked&&(n(),s.s={x:Math.abs(s.v.x),y:Math.abs(s.v.y)},s.flick={x:"h"===s.locked&&s.s.x>=k&&Math.sign(s.v.x),y:"v"===s.locked&&s.s.y>=k&&Math.sign(s.v.y)},t.onUp&&t.onUp(s))}}}),[e,i,c,r]);return l((()=>{if(e.current)return e.current.addEventListener("touchstart",o.onTouchStart,C),e.current.addEventListener("touchmove",o.onTouchMove,C),e.current.addEventListener("touchend",o.onTouchEnd,C),()=>{e.current&&(e.current.removeEventListener("touchstart",o.onTouchStart),e.current.removeEventListener("touchmove",o.onTouchMove),e.current.removeEventListener("touchend",o.onTouchEnd))}}),[o,r]),{height:i,width:c}},S=(e,t,n)=>Math.min(Math.max(e,t),n),T=(e,t,n)=>e>n?n+(n+e)/50:e<t?t-(t-e)/50:e,D=e=>--e*e*e+1;class L{constructor(e){this.listeners=[],this.value=e,this.checkpoint=e}setValue=(e,t=!0)=>{t&&delete this.id,this.value=e,this.listeners.forEach((t=>t(e)))};spring=(e,t=L.defaultAnimationDuration)=>new Promise((n=>{if(e===this.value)return;const l=this.id=performance.now(),a=this.value,r=c=>{if(l!==this.id)return;const i=Math.max(0,c-l);if(i>=t)this.setValue(e),n();else{const n=(e-a)*D(i/t);this.setValue(a+n,!1),requestAnimationFrame(r)}};r(l)}));on=e=>(this.listeners.push(e),()=>this.listeners=this.listeners.filter((t=>t!==e)));saveCheckpoint=()=>{this.checkpoint=this.value}}L.defaultAnimationDuration=300;const z=e=>a((()=>new L(e)),[]),$=r((({pull:t},n)=>e.createElement("div",{className:"pull-indicator center",ref:n},e.createElement(N,{icon:"refresh",color:"#000"})))),V=r((({children:t,className:a,onRefresh:r,horizontal:i},s)=>{const o=s||n(),d=n(),m=n({}).current,h=z(0);P(o,{onDown:()=>{m.canScrollVertical=o.current.scrollHeight>o.current.clientHeight,m.canScrollHorizontal=o.current.scrollWidth>o.current.clientWidth,m.initScrollTop=o.current.scrollTop,m.initScrollLeft=o.current.scrollLeft},onCapture:e=>"v"===e.locked?!!(r&&0===o.current.scrollTop&&e.d.y>0)||!!m.canScrollVertical&&(0===m.initScrollTop&&e.d.y<0||m.initScrollTop>0):"h"===e.locked?!!m.canScrollHorizontal&&m.initScrollLeft>0:void 0,onMove:e=>{r&&0===m.initScrollTop&&h.setValue(Math.min(70,e.d.y))},onUp:e=>{r&&0===m.initScrollTop&&(e.d.y>70?h.spring(0).then(r):h.spring(0))}}),l((()=>{if(r)return h.on((e=>{const t=e/70;d.current.style.transform=`translateY(${e}px) rotate(${360*t}deg)`,d.current.style.opacity=t}))}),[]);return e.createElement(c,null,r?e.createElement("div",{className:"list-pull"},e.createElement($,{pull:h,ref:d})):null,e.createElement("div",{className:g("scroller",a,i?"horizontal":"vertical"),ref:o,onScroll:()=>{navigator.virtualKeyboard?.hide(),document.activeElement.blur()},children:t}))})),R=({path:t,onClickPath:n})=>{const l=t.split("/").filter(Boolean);return 0===l.length?null:e.createElement(V,{horizontal:!0,className:"breadcrumbs"},e.createElement(N,{icon:"home",onClick:()=>n("/")}),e.createElement("span",null," / "),l.map(((t,a)=>e.createElement(c,{key:t+"_"+a},e.createElement(f,{onClick:()=>n(),children:t}),a<l.length-1?e.createElement("span",null," / "):null))))},_=({active:t,undetermined:n})=>e.createElement("div",{className:g("toggle-check",t&&"active",n&&"undetermined")},e.createElement(N,{icon:n?"horizontal_rule":t?"check":null})),Y=({title:t,meta:n,leftIcon:l,href:a,onClick:r,onPressMore:c,target:i,children:s,caret:o,disabled:d,RightComponent:m})=>e.createElement(f,{className:g("touchable-row",d&&"disabled"),onClick:r,href:a,target:i},e.createElement("div",{className:"touchable-row-left"},"string"==typeof l?e.createElement("div",{className:"touchable-row-icon"},e.createElement(N,{icon:l})):null,"object"==typeof l?e.createElement("div",{className:"touchable-row-icon"},l):null,e.createElement("div",{className:"touchable-row-content"},t?e.createElement("div",{className:"touchable-row-title",children:t}):null,n?e.createElement("div",{className:"meta",children:n}):null,s)),m,c?e.createElement(f,{onClick:c},e.createElement(N,{icon:"more_vert"})):null,o?e.createElement(N,{icon:"chevron_right"}):null),X=r((({className:t,visible:a,pan:r,children:c,onClose:i,onPress:s,showShade:o,handle:d},m)=>{const h=n(),u=n(),{height:p}=P(u,{onMove:e=>{r.setValue(e.height-Math.max(e.d.y/100,e.d.y))},onUp:e=>{1===e.flick.y||e.d.y>e.height/2?v():r.spring(e.height)}}),v=()=>r.spring(0).then(i);return l((()=>{if(p)return r.on((e=>{u.current.style.transform=`translateY(-${e}px)`,h.current&&(h.current.style.opacity=e/p)}))}),[p]),l((()=>{p&&(a?r.spring(p):r.spring(0).then(i))}),[a,p,i]),e.createElement("div",{className:"layer"},a&&o?e.createElement("div",{className:"shade shade-bottom-sheet",ref:h,onClick:v}):null,e.createElement("div",{ref:u,className:g("sheet",t),onClick:s},d?e.createElement("div",{className:"handle"}):null,c))})),I=m(null),U=new L(0),j=()=>{const t=h(I);return t?e.createElement(X,{pan:U,visible:!!t,onClose:()=>I.update(null),showShade:!0},e.createElement("div",{className:"action-sheet-title"},t&&t.title),e.createElement("hr",null),t.options.map(((n,l)=>e.createElement(Y,{key:l,title:n.name,leftIcon:n.icon,onClick:e=>{n.onClick&&n.onClick(),t.callback&&t.callback(n.value),U.spring(0).then((()=>I.update(0)))},disabled:n.disabled,target:n.target,href:n.href})))):null},A=(e,t,n)=>I.update({title:e,options:t,callback:n}),B=m([]),H=(e,t)=>{B.update(B.state.map((t=>(t===e&&(t.visible=!1),t)))),setTimeout((()=>{e.callback(t),B.update(B.state.filter((t=>t!==e)))}),300)},O=({alert:t,isLast:n})=>e.createElement("div",{className:g("alert-container",n&&t.visible&&t.className)},e.createElement("div",{className:g("alert",n&&t.visible&&"visible"),onClick:e=>e.stopPropagation()},e.createElement("div",{className:"alert-top"},t.title?e.createElement("div",{className:"alert-title"},t.title):null,t.message?e.createElement("div",{className:"alert-message"},t.message):null),t.options.length?e.createElement(V,{className:g("alert-buttons",t.options.length<=2&&"alert-buttons-horizontal"),children:t.options.map(((n,l)=>e.createElement(f,{key:l,className:g("alert-button",n.destructive&&"destructive"),onClick:()=>{n.onPress&&n.onPress(),H(t,n._id||n.value)},children:n.name,disableMenu:!0})))}):null)),W=()=>{const t=h(B),n=t.filter((e=>e.visible)).pop();return 0===t.length?null:e.createElement("div",{className:g("layer alert-backdrop",t.some((e=>e.visible))&&"visible"),onClick:()=>H(n),children:t.map((t=>e.createElement(O,{key:t.key,alert:t,isLast:n===t})))})},q=(e,t=[{name:"Close"}])=>new Promise((n=>{B.update([...B.state,{key:d(),callback:n,visible:!0,options:t,...e}])})),F=()=>e.createElement("div",{className:"spinner"}),K=({className:t,title:n,onClick:l,onDown:a,icon:r,href:i,tabIndex:s,color:o,textColor:d,disabled:m,width:h,download:u,iconImageUrl:p,loading:v,submit:g,pop:E})=>{const y=["btn"];t&&y.push(t),m&&y.push("disabled");const b={background:o,width:h,color:d},k=()=>v?e.createElement(F,null):e.createElement(c,null,p?e.createElement("img",{src:p,alt:n}):null,r?e.createElement(N,{icon:r}):null,n?e.createElement("span",null,n):null);return i?e.createElement("a",{onClick:e=>{u&&e.stopPropagation()},href:i,target:i&&E?"_blank":null,className:y.join(" "),tabIndex:s,style:b,children:k()}):e.createElement(f,{type:g?"submit":"button",className:y.join(" "),onClick:l,onTouchStart:a,tabIndex:s,style:b,children:k()})},G={card:"os:back",modal:"os:close"},J=({title:t,subtitle:n,presentation:l="card",onClose:a,headerRight:r,SearchComponent:i})=>{const s=G[l];return e.createElement(c,null,e.createElement("div",{className:"header"},e.createElement("div",{className:"header-spacer"},s&&e.createElement(f,{className:"header-close",onClick:e=>{e.stopPropagation(),e.preventDefault(),a()},children:e.createElement(N,{icon:s})})),e.createElement("div",{className:"header-middle"},e.createElement("div",{className:"header-title"},t),n?e.createElement("div",{className:"header-subtitle"},n):null),e.createElement("div",{className:"header-spacer"},r)),i)},Q=({className:t,icon:n,title:l,message:a,children:r})=>e.createElement("div",{className:g("placeholder",t)},n?e.createElement(N,{icon:n}):null,l?e.createElement("div",{className:"title"},l):null,a?e.createElement("div",{className:"placeholder-message"},a):null,r),Z=r((({},t)=>{const l=n();return i(t,(()=>({progress:(e,t)=>{l.current&&(l.current.style.opacity=1-e/t)}}))),e.createElement("div",{className:"shade shade-card",ref:l})})),ee=r((({title:a,subtitle:r,children:c,footer:i,headerRight:s,hasScrollView:o=!0,SearchComponent:d,scrollerRef:m,disableGestures:h,onDrop:p,isVisible:v=!0,animateIn:E=!0,ShadeComponent:f=Z,HeaderComponent:y,className:b},N)=>{N=N||n();const k=n(history.length>1).current,[C,w]=t(!1),x=n(),M=z(E?document.body.clientWidth:0),S=()=>M.spring(T).then((()=>{k&&u.goBack()})),{width:T}=P(N,{onCapture:e=>{if(k&&!h)return"h"===e.locked&&e.d.x>0},onMove:e=>{M.setValue(Math.max(0,e.d.x))},onUp:e=>{1===e.flick.x||e.d.x>e.width/2?S():M.spring(0)}});l((()=>{T&&E&&(v?M.spring(0):M.spring(T))}),[E,v,T]),l((()=>M.on((e=>{N.current&&(N.current.style.transform=`translateX(${e}px)`),x.current&&x.current.progress(e,T)}))),[T]);return e.createElement("div",{className:"layer"},f?e.createElement(f,{ref:x}):null,e.createElement("div",{className:g("card",E&&"animate",b),ref:N,onDragOver:p&&(e=>{e.preventDefault()}),onDragEnter:p&&(e=>{w(!0)}),onDragLeave:p&&(e=>{w(!1)}),onDrop:p&&(e=>{w(!1),p(e)})},null===y?null:y||e.createElement(J,{title:a,subtitle:r,presentation:"card",SearchComponent:d,onClose:S,headerRight:s}),o?e.createElement(V,{className:"card-body",ref:m,children:c}):e.createElement("div",{className:"card-body",children:c}),i,C?e.createElement(Q,{className:"drop-zone",icon:"upload",title:"Upload"}):null))})),te=({status:t})=>"connected"===t?null:e.createElement("div",{className:"connection-indicator"},e.createElement("div",{className:"bubble"},e.createElement(F,null),t)),ne=({title:t,children:n,isVisible:l,onClose:a})=>l?e.createElement("div",{className:"corner-dialog"},e.createElement("div",{className:"corner-dialog-title"},t,e.createElement(N,{icon:"close",onClick:a})),n):null;let le={};const ae=r((({children:t,title:a,headerRight:r,onClose:c,isVisible:s,className:o},d)=>{const m=n(),h=n(),p=z(0),v=()=>u.goBack(1);i(d,(()=>({close:v})));const{width:f,height:y}=P(m,{onMove:e=>{},onUp:e=>{}});return l((()=>{s?p.spring(1):p.spring(0)}),[s]),l((()=>p.on((e=>{const t=1-e,n=le.x*t,l=le.y*t;m.current&&(m.current.style.opacity=2*e,m.current.style.transform=`translate(${n}px, ${l}px)`,m.current.style.width=E(e),m.current.style.height=E(e)),h.current&&(h.current.style.transform=`translate(${-1*n}px, ${-1*l}px)`)}))),[f,y]),e.createElement("div",{className:"layer"},e.createElement("div",{className:g("reveal",o),ref:m},e.createElement("div",{className:"reveal-content",ref:h},e.createElement(J,{title:a,onClose:v,headerRight:r,presentation:"card"}),e.createElement("div",{className:"card-body",children:t}))))})),re=(e,t)=>{le.x=e,le.y=t},ce=e=>{const t=e.currentTarget.getBoundingClientRect();re((t.left+t.right)/2,(t.top+t.bottom)/2)},ie=({title:t,icon:n,href:l})=>e.createElement(f,{href:l,className:"springboard-icon",onClick:ce},e.createElement("div",{className:"icon-frame"},e.createElement(N,{icon:n})),e.createElement("div",{className:"springboard-icon-name"},t)),se=({position:n,button:a,content:r})=>{const[c,i]=t(!1);return l((()=>{if(!c)return;const e=e=>{e.composedPath().some((e=>e.classList&&e.classList.contains("dropdown-content")))||i(!1)};return setTimeout((()=>{window.addEventListener("click",e,{passive:!1})}),0),()=>window.removeEventListener("click",e)}),[c]),e.createElement("div",null,e.createElement("span",{className:"dropdown"},e.createElement("div",{children:a,className:"dropdown-button",onClick:()=>i(!0)}),e.createElement("div",{className:g("dropdown-content",n||"top-right",c?"visible":"hidden"),children:r})))},oe=({title:t,icon:n,onClick:l,href:a,disabled:r,children:c,active:i})=>e.createElement(Y,{className:"dropdown-item",onClick:l,disabled:r,active:i,children:c,href:a,leftIcon:n,title:t}),de=({emoji:t})=>e.createElement("span",{className:"emoji",children:t}),me=({icon:t,title:n,loading:l,disabled:a,active:r=!0,href:i,onPress:s})=>e.createElement(f,{className:g("fab",!n&&"round"),loading:l,disabled:a,active:r,onClick:s,href:i},l?e.createElement(v,{size:24}):e.createElement(c,null,e.createElement(N,{icon:t}),n&&e.createElement("div",{className:"fab-title"},n))),he=({title:t,children:a,footer:r,headerRight:c,SearchComponent:i})=>{const s=n(),o=z(0);return l((()=>(o.spring(1),o.on((e=>{s.current.style.opacity=e})))),[]),e.createElement("div",{className:"fullscreen",ref:s},e.createElement(J,{title:t,presentation:"full",onClose:()=>{o.spring(0).then((()=>u.goBack()))},headerRight:c,SearchComponent:i}),e.createElement(V,{className:"card-body"},a),r)},ue=({icon:t,title:n,badge:l,loading:a,disabled:r,onClick:c,active:i,href:s})=>e.createElement(f,{className:g("header-button center","Cancel"===n&&"header-cancel"),onClick:c,loading:a,disabled:r,active:i,href:s},t?e.createElement(N,{icon:t}):null,n?e.createElement("span",null,n):null,l?e.createElement("span",{className:"badge"},l):null),pe=({percent:t})=>e.createElement("div",{className:"percent-bar"},e.createElement("div",{className:"percent-bar-inner",style:{width:100*t+"%"}})),ve=({title:t,items:n=[],keyExtractor:l=(e=>e._id),renderItem:a,loading:r,className:i,ListEmptyComponent:o,HeaderComponent:d,children:m})=>e.createElement("div",{className:g("list",i)},t?e.createElement(c,null,e.createElement("div",{className:"list-title"},t),e.createElement("hr",null)):null,d,n.length||m?e.createElement("div",{className:"list-body"},r||!n?null:o&&0===n.length?o:n.map(((t,r)=>e.createElement(c,{key:l(t)},a(t,r),r<n.length-1&&e.createElement("hr",null)))),s.map(m,((t,n)=>e.createElement(c,{key:n},t,n<m.length-1&&e.createElement("hr",null))))):o),ge=m([]),Ee=t=>e.createElement("div",{key:t.id,className:"absolute",children:t.children}),fe=()=>h(ge).map(Ee),ye=e=>ge.update([...ge.state,{id:Math.random(),children:e}]),be=()=>{ge.update([])},Ne=m(),ke=()=>{const t=h(Ne);return l((()=>{if(!t)return;const e=setTimeout((()=>Ne.update(null)),2e3);return()=>clearTimeout(e)}),[t]),t?e.createElement("div",{className:"toast-container"},e.createElement("div",{className:"toast",children:t})):null},Ce=Ne.update,we=()=>e.createElement(c,null,e.createElement(fe,null),e.createElement(j,null),e.createElement(W,null),e.createElement(ke,null)),xe=({title:t,LeftComponent:n,caret:l=!0,checked:a,active:r,href:c,onPress:i})=>e.createElement(f,{className:"pill",onClick:i,active:r,interactive:!0,href:c},n,t?e.createElement("div",{className:"pill-title"},t):null,l?e.createElement(N,{className:"pill-caret",icon:"expand_more"}):e.createElement(_,{active:a})),Me=({color:t="#fff",size:n=20,percent:l,spinning:a,completedIcon:r="check"})=>{if(a||!l)return e.createElement(F,null);if(1===l)return e.createElement(N,{icon:r});const c=n/2,i=c-1,s=2*i*Math.PI,o=s-l*s;return e.createElement("svg",{height:n,width:n},e.createElement("circle",{stroke:t,opacity:.3,fill:"transparent",strokeWidth:2,r:i,cx:c,cy:c}),e.createElement("circle",{strokeDasharray:s+" "+s,style:{strokeDashoffset:o,transform:"rotate(-90deg)",transformOrigin:"50% 50%"},stroke:t,fill:"transparent",strokeWidth:2,r:i,cx:c,cy:c}))},Pe=({ar:t,url:n,alt:l,className:a,children:r,base64Png:c})=>e.createElement("div",{className:g("img",a)},e.createElement("div",{style:{paddingTop:100*(t||1)+"%"}}),n?e.createElement("img",{src:n,className:"img-real",alt:l,draggable:!1}):c?e.createElement("img",{src:`data:image/png;base64,${c}`}):e.createElement("div",{className:"img-real",alt:l,draggable:!1}),r?e.createElement("div",{className:"img-inside"},r):null),Se=({children:t})=>e.createElement("div",{className:"segmented",children:t}),Te=({value:t,placeholder:n,onChange:l,loading:a})=>e.createElement("div",{className:"search"},e.createElement(N,{icon:"search"}),e.createElement("input",{placeholder:n,type:"search",value:t,onChange:e=>{e.stopPropagation(),l(e.target.value)}}),e.createElement(N,{icon:"close",onClick:()=>l(""),size:16}),a?e.createElement(F,null):null),De=({options:t,value:n,onChangeValue:l})=>e.createElement("select",{onChange:e=>l(e.target.value),value:n},Object.keys(t).map((n=>e.createElement("option",{key:n,value:n,children:t[n]})))),Le=({leftText:t,rightText:n})=>e.createElement("div",{className:"tabular-row"},e.createElement("div",{className:"tabular-row-left"},t),e.createElement("div",{className:"tabular-row-right"},n)),ze=({value:t,type:n,placeholder:l,onChange:a})=>e.createElement("input",{placeholder:l,className:"text",type:n,value:t,onChange:e=>{e.stopPropagation(),a(e.target.value)}}),$e=(e,t=0)=>{let n=3735928559^t,l=1103547991^t;for(let t,a=0;a<e.length;a++)t=e.charCodeAt(a),n=Math.imul(n^t,2654435761),l=Math.imul(l^t,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(l^l>>>13,3266489909),l=Math.imul(l^l>>>16,2246822507),l^=Math.imul(n^n>>>13,3266489909),4294967296*(2097151&l)+(n>>>0)},Ve=360/Math.pow(2,53),Re=o((({tag:t,count:n})=>{const l=(e=>`hsl(${180-Ve*$e(e)}, 100%, 50%)`)(t);return e.createElement("div",{className:"tag",style:{borderColor:l,color:l},children:`${t}  ${n||""}`})})),_e=({pan:t,i:a,width:r})=>{const c=n();return l((()=>{if(!r)return;const e=a*r,n=r/3;return t.on((t=>{const l=Math.min(Math.abs(e-t),n);c.current.style.opacity=Math.min(1,1.5-l/n)}))}),[r]),e.createElement("div",{className:"pager-dot",ref:c,style:{opacity:t.value===a?1:.5}})},Ye=({title:t,i:a,pan:r,width:c,onPress:i})=>{const s=n();return l((()=>{if(!c)return;const e=a*c,t=c/3;return r.on((n=>{const l=Math.min(Math.abs(e-n),t);s.current.style.opacity=1.5-l/t}))}),[c]),e.createElement("div",{children:t,className:"pager-tabs-title",onClick:()=>i(a),ref:s})},Xe=r((({titles:t,children:a,vertical:r,dots:c},s)=>{const o=z(0),d=n(),m=n(),h=n({}).current;i(s,(()=>({scrollToPage:e=>{r?o.spring(e*p):o.spring(e*u)}})));const{width:u,height:p}=P(m,{onCapture:e=>{if(r){if("v"===e.locked)return e.d.y<0||h.initPan-e.d.y>0}else if("h"===e.locked)return e.d.x<0||h.initPan-e.d.x>0},onDown:e=>{r?(h.currentPage=Math.round(o.value/e.height),h.initPan=o.value):(h.currentPage=Math.round(o.value/e.width),h.initPan=o.value)},onMove:e=>{if(r){const t=S(h.initPan-e.d.y,0,e.height*(a.length-1));o.setValue(t)}else{const t=S(h.initPan-e.d.x,0,e.width*(a.length-1));o.setValue(t)}},onUp:e=>{if(r)if(e.flick.y<0)o.spring(p*S(h.currentPage+1,0,a.length-1));else if(e.flick.y>0)o.spring(p*S(h.currentPage-1,0,a.length-1));else{const t=S(Math.round(o.value/e.height),0,a.length-1);o.spring(t*p)}else if(e.flick.x<0)o.spring(u*S(h.currentPage+1,0,a.length-1));else if(e.flick.x>0)o.spring(u*S(h.currentPage-1,0,a.length-1));else{const t=S(Math.round(o.value/e.width),0,a.length-1);o.spring(t*u)}}},[a]);l((()=>o.on((e=>{m.current.style.transform=`translate${r?"Y":"X"}(-${e}px)`,d.current&&(d.current.style.transform=`translateX(${e/a.length}px)`)}))),[u]);const v=e=>{o.spring(e*u)};return e.createElement("div",{className:g("pager",r?"vertical":"horizontal")},t?e.createElement("div",{className:"pager-tabs"},t.map(((t,n)=>e.createElement(Ye,{key:n,title:t,pan:o,i:n,width:u,onPress:v}))),u?e.createElement("div",{className:"pager-tabs-indicator",ref:d,style:{width:u/t.length}}):null):null,e.createElement("div",{className:"pager-scroller"},e.createElement("div",{className:"pager-canvas",ref:m,style:{transform:r?"translateX(0px)":"translateY(0px)"}},e.Children.map(a,((t,n)=>e.createElement("div",{key:n,className:"pager-page",children:t}))))),c?e.createElement("div",{className:"pager-dots"},e.Children.map(a,((t,n)=>e.createElement(_e,{key:n,pan:o,width:u,i:n})))):null)})),Ie=r((({children:t,title:a,search:r,onChangeSearch:c,searchLoading:s,hasScrollView:o=!0,headerRight:d,onClose:m,isVisible:h},p)=>{const v=n(),g=n(),E=z(0),f=()=>u.goBack(1);i(p,(()=>({close:f})));const{height:y}=P(g,{onMove:e=>{E.setValue(y-Math.max(0,e.d.y))},onUp:e=>{1===e.flick.y||e.d.y>e.height/2?f():E.spring(e.height)}});return l((()=>{y&&(h?E.spring(y):E.spring(0))}),[h,y]),l((()=>{const e=document.querySelectorAll(".card");return E.on((t=>{const n=t/y;g.current&&(g.current.style.transform=`translateY(-${t}px)`),v.current&&(v.current.style.display=t?"block":"none",v.current.style.opacity=t/y*.8),[...e].forEach((e=>{e.style.transform=`scale(${1-.04*n})`}))}))}),[y]),e.createElement("div",{className:"layer"},e.createElement("div",{className:"window",ref:g},e.createElement("div",{className:"window-content"},e.createElement(J,{title:a,presentation:"modal",onClose:f,SearchComponent:c?e.createElement("div",{className:"header-search"},e.createElement(ze,{placeholder:"Search",type:"search",value:r,onChange:c,loading:s})):null,headerRight:d}),o?e.createElement(V,{className:"card-body",children:t}):e.createElement("div",{className:"card-body",children:t}))))})),Ue=new Map,je=e=>function(...t){const n=t[0];return Ue.has(n)||Ue.set(n,e.apply(this,t)),Ue.get(n)},Ae=je((e=>new Promise((t=>{const n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n.onload=()=>{console.log("loaded css"),t()},document.head.appendChild(n)})))),Be=je(((e,t)=>new Promise((n=>{const l=document.createElement("script");l.type="text/javascript",l.async=!0,l.src=e,l.onload=()=>{console.log("loaded script"),n(window[t])},document.head.appendChild(l)})))),He=navigator.virtualKeyboard,Oe=()=>l((()=>{if(He)return He.overlaysContent=!0,()=>He.overlaysContent=!1}),[]);export{j as ActionSheet,v as ActivityIndicator,W as Alert,L as AnimatedValue,X as BottomSheet,R as BreadCrumbs,K as Button,ee as Card,_ as CheckBox,te as ConnectionIndicator,ne as CornerDialog,ie as DashboardIcon,se as Dropdown,oe as DropdownItem,de as Emoji,k as FLICK_SPEED,me as Fab,he as FullScreen,ue as HeaderButton,N as Icon,Pe as Image,ve as List,fe as Modal,pe as PercentBar,xe as PillButton,Q as Placeholder,we as PoonOverlays,Me as ProgressRing,$ as PullIndicator,ae as Reveal,J as ScreenHeader,V as ScrollView,Te as SearchInput,Se as SegmentedController,De as Select,Z as Shade,F as Spinner,Le as TabularRow,Re as Tag,ze as TextInput,ke as Toast,f as Touchable,Y as TouchableRow,Xe as ViewPager,Ie as Window,T as bounce,g as c,S as clamp,$e as cyrb53,D as easeOutCubic,be as hideModal,Ae as loadCss,Be as loadScript,je as memoize,ge as modalState,re as setRevealOrigin,A as showActionSheet,q as showAlert,ye as showModal,E as toPercent,Ce as toast,z as useAnimatedValue,P as usePanGestures,x as useSize,Oe as useVirtualKeyboard};
