import e,{useMemo as t,forwardRef as n,useState as a,useRef as l,useEffect as r,Fragment as c,useImperativeHandle as i,Children as s,memo as o,createElement as m}from"react";import{createBus as d,useBus as u,randomId as h}from"poon-router/util.js";import{navigation as p}from"poon-router";const v=new Array(12).fill(0),g=({size:t=16,color:n="#fff"})=>e.createElement("div",{className:"activity-indicator",style:{width:t,height:t},children:v.map(((a,l)=>{const r={width:1.7,borderRadius:1,left:t/2-1,height:t/4,animationDelay:(.1*l-1.1).toFixed(1)+"s",transform:`rotate(${30*l}deg)`,backgroundColor:n,transformOrigin:`50% ${t/2}px`};return e.createElement("div",{key:l,style:r})}))}),E=(...e)=>e.filter(Boolean).join(" "),f=e=>100*e+"%",y=(e,t,n)=>Math.min(Math.max(e,t),n),b=e=>Object.assign({},e),N=(e,t)=>Object.keys(e).every((n=>e[n]===t[n])),k=(e,t,n)=>e>n?n+(n+e)/50:e<t?t-(t-e)/50:e,x=e=>--e*e*e+1,C=(e,t)=>n=>y(n,e,t),w=(e,t,n)=>(1-e)*t+e*n;class M{constructor(e,t){this.id=t,this.listeners=[],this.value=e,this.oldValue=e}setValue=(e,t=!0)=>{if(isNaN(e))return console.warn("Cant animate NaN");t&&(delete this.id,this.oldValue=e),this.value=e,this.listeners.forEach((t=>t(e)))};spring=(e,t=M.defaultAnimationDuration)=>new Promise((n=>{if(e===this.value)return n();const a=this.id=performance.now(),l=this.value,r=c=>{if(a!==this.id)return;const i=Math.max(0,c-a);if(i>=t)this.setValue(e,!0),n();else{const n=(e-l)*x(i/t);this.setValue(l+n,!1),requestAnimationFrame(r)}};r(a)}));on=e=>(this.listeners.push(e),()=>this.listeners=this.listeners.filter((t=>t!==e)));end=()=>{delete this.id}}M.defaultAnimationDuration=300;const z=e=>t((()=>new M(e)),[]),P=n((({href:t,onClick:n,className:r,active:c,target:i,children:s,style:o,disableMenu:m},d)=>{const[u,h]=a(!1),p=l(!1),v=e=>{e.button&&0!==e.button||(e.stopPropagation(),p.current=!1,h(!0))},g=()=>{h(!1)};return e.createElement(t?"a":"button",{href:t,onTouchStart:v,onTouchMove:g,onTouchEnd:g,onMouseDown:v,onMouseUp:g,onMouseLeave:g,onClick:e=>{if(p.current)return e.preventDefault();n&&(t||e.preventDefault(),n(e))},className:E("touchable",r,u&&"touched",m&&"disable-menu",c&&"active"),target:i,draggable:!1,onContextMenu:m?e=>(e.preventDefault(),!1):void 0,style:o,type:"button",ref:d},s)})),S=/iPad|iPhone|iPod/.test(navigator.platform),$={"os:back":S?"arrow_back_ios":"arrow_back","os:share":S?"ios_share":"share","os:close":S?"keyboard_arrow_down":"close"},L=({icon:t,className:n,color:a,title:l,size:r,onClick:c})=>e.createElement("i",{className:E("material-icons",n),style:{color:a,fontSize:r},title:l,onClick:c,children:$[t]||t}),V=({title:t,meta:n,leftIcon:a,href:l,onClick:r,onPressMore:c,target:i,children:s,caret:o,disabled:m,RightComponent:d,className:u,active:h})=>e.createElement(P,{className:E("touchable-highlight touchable-row",m&&"disabled",u),onClick:r,href:l,target:i,active:h},e.createElement("div",{className:"touchable-row-left"},"string"==typeof a?e.createElement("div",{className:"touchable-row-icon"},e.createElement(L,{icon:a})):null,"object"==typeof a?e.createElement("div",{className:"touchable-row-icon"},a):null,e.createElement("div",{className:"touchable-row-content"},t?e.createElement("div",{className:"touchable-row-title",children:t}):null,n?e.createElement("div",{className:"meta",children:n}):null,s)),d,c?e.createElement(P,{onClick:c},e.createElement(L,{icon:"more_vert"})):null,o?e.createElement(L,{icon:"chevron_right"}):null),D=e=>{const[t,n]=a({width:e.current?.clientWidth,height:e.current?.clientHeight});return r((()=>{if(!e.current)return;const t=new ResizeObserver((e=>{const t=e[0].borderBoxSize[0];n({height:t.blockSize,width:t.inlineSize})}));return t.observe(e.current),t.disconnect.bind(t)}),[]),t},T={capture:!1,passive:!1},X=(e=0,t,n)=>{const a=Math.min(n,50)/50;return e*(1-a)+t*a};let Y;const R=(e,t=0)=>({x:e.touches?e.touches[t].clientX:e.clientX,y:e.touches?e.touches[t].clientY:e.clientY}),j=(e,t={},n)=>{const{width:a,height:c}=D(e),i=l({}).current;return r((()=>{if(!e.current)return;const n=e=>{const t=e-i.last.ts;if(t>0){const n=(i.x-i.last.x)/t,a=(i.y-i.last.y)/t;i.v={x:X(i.v.x,n,t),y:X(i.v.y,a,t)},i.last={x:i.x,y:i.y,ts:e}}},l=e=>{if(e.pageX<10&&e.preventDefault(),2===e.touches.length){const t=R(e,0),n=R(e,1),a=t.x-n.x,l=t.y-n.y;return void(i.pinch={d0:Math.sqrt(Math.pow(a,2)+Math.pow(l,2))})}Y=null;for(let e in i)delete i[e];const{x:n,y:l}=R(e);Object.assign(i,{x:n,y:l,size:{x:a,y:c},width:a,height:c,locked:!1,touch:!1,origin:{x:n,y:l},d:{x:0,y:0},v:{x:0,y:0},s:{x:0,y:0},flick:null,last:{ts:e.timeStamp,x:n,y:l}}),t.onDown&&t.onDown(i)},r=a=>{if(!Y||Y===e.current){if(i.pinch){if(2===a.touches.length){i.locked="pinch";const e=R(a,0),n=R(a,1),l=e.x-n.x,r=e.y-n.y;i.pinch.d=Math.sqrt(Math.pow(l,2)+Math.pow(r,2)),t.onPinch&&t.onPinch({center:{x:(e.x+n.x)/2,y:(e.y+n.y)/2},scale:i.pinch.d/i.pinch.d0})}}else{const{x:e,y:t}=R(a);if(i.x=e,i.y=t,n(a.timeStamp),i.d={x:i.x-i.origin.x,y:i.y-i.origin.y},!i.locked){const e=Math.abs(i.d.x),t=Math.abs(i.d.y);(t>10||e>10)&&(i.locked=t>e?"y":"x")}}i.locked&&("x"===i.locked?i.distance=i.d.x:"y"===i.locked&&(i.distance=i.d.y),i.touch||(i.touch=t.onCapture({direction:i.locked,distance:i.d[i.locked],size:i.size[i.locked],pinch:i.pinch})),i.touch&&(a.stopPropagation(),Y=e.current,t.onMove&&t.onMove({d:i.d,direction:i.locked,distance:i.d[i.locked],velocity:i.v[i.locked],size:i.size[i.locked]},a)))}},s=a=>{if(a.touches.length>0)return;if(Y&&Y!==e.current)return;if(!i.touch)return;n(a.timeStamp);const l=i.v[i.locked],r=Math.abs(l),c=i.d[i.locked],s=i.size[i.locked];if(i.locked){const e=r>=.25&&Math.sign(l)||Math.abs(c)>s/2&&Math.sign(c);t.onUp&&t.onUp({flick:-1*e,flickMs:Math.min((s-Math.abs(c))/r,300),direction:i.locked,velocity:l,size:s})}},o=n=>{e.current.scrollTop+=n.deltaY,t.onPan&&t.onPan({x:{distance:n.deltaX,size:a},y:{distance:n.deltaY,size:c}})};return e.current.addEventListener("touchstart",l,T),e.current.addEventListener("touchmove",r,T),e.current.addEventListener("touchend",s,T),e.current.addEventListener("wheel",o,T),t.onDoubleTap&&e.current.addEventListener("dblclick",t.onDoubleTap,T),()=>{e.current&&(e.current.removeEventListener("touchstart",l),e.current.removeEventListener("touchmove",r),e.current.removeEventListener("touchend",s),e.current.removeEventListener("wheel",o),t.onDoubleTap&&e.current.removeEventListener("dblclick",t.onDoubleTap))}}),[e,c,a,n]),{height:c,width:a}},U=n((({className:t,visible:n,pan:a,children:c,onClose:i,onPress:s,showShade:o,showHandle:m},d)=>{const u=l(),h=l(),{height:p}=j(h,{onCapture:e=>"y"===e.direction,onMove:e=>{a.setValue(e.size-Math.max(e.distance/100,e.distance))},onUp:e=>{if(-1===e.flick)return a.spring(0,e.flickMs).then(i);a.spring(e.size)}});return r((()=>{if(p)return a.on((e=>{h.current.style.transform=`translateY(-${e}px)`,u.current&&(u.current.style.opacity=e/p)}))}),[p]),r((()=>{p&&(n?a.spring(p):a.spring(0).then(i))}),[n,p,i]),e.createElement("div",{className:"layer"},n&&o?e.createElement("div",{className:"shade shade-bottom-sheet",ref:u,onClick:()=>a.spring(0).then(i)}):null,e.createElement("div",{ref:h,className:E("sheet",t),onClick:s},m?e.createElement("div",{className:"handle"}):null,c))})),W=d(null),I=new M(0),O=()=>{const t=u(W);return t?e.createElement(U,{pan:I,visible:!!t,onClose:()=>W.update(null),showShade:!0},e.createElement("div",{className:"action-sheet-title"},t&&t.title),e.createElement("hr",null),t.options.map(((n,a)=>e.createElement(V,{key:a,title:n.name,leftIcon:n.icon,onClick:e=>{n.onClick&&n.onClick(),t.callback&&t.callback(n.value),I.spring(0).then((()=>W.update(0)))},disabled:n.disabled,target:n.target,href:n.href})))):null},_=(e,t,n)=>W.update({title:e,options:t,callback:n}),H=({imageId:t,className:n,variant:a,getUrl:l})=>t?e.createElement("img",{draggable:!1,className:E("avatar",n),src:l(t,a)}):e.createElement("div",{draggable:!1,className:E("avatar",n)});H.defaultProps={variant:"normal",getUrl:()=>null};const A=n((({pull:t},n)=>e.createElement("div",{className:"pull-indicator center",ref:n},e.createElement(L,{icon:"refresh",color:"#000"})))),B=n((({children:t,className:n,onRefresh:a,horizontal:i},s)=>{const o=s||l(),m=l(),d=l({}).current,u=z(0),h=z(0);j(o,{onDown(){d.canScrollVertical=o.current.scrollHeight>o.current.clientHeight,d.canScrollHorizontal=o.current.scrollWidth>o.current.clientWidth,d.initScrollTop=o.current.scrollTop,d.initScrollLeft=o.current.scrollLeft,h.end()},onCapture:e=>"x"===e.direction?d.canScrollHorizontal:"y"===e.direction?!!(a&&0===o.current.scrollTop&&e.distance>0)||!!d.canScrollVertical&&(0===d.initScrollTop&&e.distance<0||d.initScrollTop>0):void 0,onMove(e){"y"===e.direction?a&&0===d.initScrollTop?u.setValue(Math.min(70,e.distance)):h.setValue(d.initScrollTop-e.distance):"x"===e.direction&&h.setValue(d.initScrollLeft-e.distance)},onUp(e){"y"===e.direction?a&&0===d.initScrollTop?e.distance>70?u.spring(0).then(a):u.spring(0):e.velocity&&h.spring(h.value-2e3*e.velocity,2e3):"h"===e.direction&&e.velocity&&h.spring(h.value-2e3*e.velocity,2e3)}}),r((()=>h.on((e=>{i?o.current.scrollLeft=e:o.current.scrollTop=e}))),[]),r((()=>{if(a)return u.on((e=>{const t=e/70;m.current.style.transform=`translateY(${e}px) rotate(${360*t}deg)`,m.current.style.opacity=t}))}),[]);return e.createElement(c,null,a?e.createElement("div",{className:"list-pull"},e.createElement(A,{pull:u,ref:m})):null,e.createElement("div",{className:E("scroller",n,i?"horizontal":"vertical"),ref:o,onScroll:()=>{navigator.virtualKeyboard?.hide(),document.activeElement.blur()},children:t}))})),F=({path:t,onClickPath:n})=>{const a=t.split("/").filter(Boolean);return 0===a.length?null:e.createElement(B,{horizontal:!0,className:"breadcrumbs"},e.createElement(L,{icon:"home",onClick:()=>n("/")}),e.createElement("span",null," / "),a.map(((t,l)=>e.createElement(c,{key:t+"_"+l},e.createElement(P,{onClick:()=>n(),children:t}),l<a.length-1?e.createElement("span",null," / "):null))))},q=({className:t,title:n,onClick:a,onDown:l,icon:r,href:i,tabIndex:s,color:o,disabled:m,download:d,iconImageUrl:u,loading:h,submit:p,fullWidth:v,target:f})=>{const y=E("btn",t,m&&"disabled",v&&"full-width",o&&`btn-${o}`);return e.createElement(P,{type:p?"submit":"button",className:y,onClick:e=>{d&&e.stopPropagation(),a&&a(e)},href:i,onTouchStart:l,tabIndex:s,children:h?e.createElement(g,null):e.createElement(c,null,u?e.createElement("img",{src:u,alt:n}):null,r?e.createElement(L,{icon:r}):null,n?e.createElement("span",null,n):null),target:f})},K=d([]),G=(e,t)=>{K.update(K.state.map((t=>(t===e&&(t.visible=!1),t)))),setTimeout((()=>{e.callback(t),K.update(K.state.filter((t=>t!==e)))}),300)},J=({alert:t,isLast:n})=>e.createElement("div",{className:E("alert-container",n&&t.visible&&t.className)},e.createElement("div",{className:E("alert",n&&t.visible&&"visible"),onClick:e=>e.stopPropagation()},e.createElement("div",{className:"alert-top"},t.title?e.createElement("div",{className:"alert-title"},t.title):null,t.message?e.createElement("div",{className:"alert-message"},t.message):null),t.options?e.createElement(B,{className:E("alert-buttons",t.options.length<=2&&"alert-buttons-horizontal"),children:t.options.map(((n,a)=>e.createElement(P,{key:a,className:E("alert-button",n.destructive&&"destructive"),onClick:()=>{n.onPress&&n.onPress(),G(t,n._id||n.value)},children:n.name,disableMenu:!0})))}):e.createElement("div",{className:"alert-bottom"},e.createElement(q,{color:"white",fullWidth:!0,title:"Close",onClick:()=>G(t)})))),Q=()=>{const t=u(K),n=t.filter((e=>e.visible)).pop();return 0===t.length?null:e.createElement("div",{className:E("layer alert-backdrop",t.some((e=>e.visible))&&"visible"),onClick:()=>G(n),children:t.map((t=>e.createElement(J,{key:t.key,alert:t,isLast:n===t})))})},Z=(e,t)=>new Promise((n=>{K.update([...K.state,{key:h(),callback:n,visible:!0,options:t,...e}])})),ee=({active:t})=>e.createElement("div",{className:E("circle-check",t&&"active")},e.createElement(L,{icon:"check"})),te=({status:t})=>"connected"===t?null:e.createElement("div",{className:"connection-indicator"},e.createElement("div",{className:"bubble"},e.createElement(g,null),t)),ne={card:"os:back",modal:"os:close"},ae=({title:t,subtitle:n,presentation:a="card",onClose:l,headerRight:r,SearchComponent:i})=>{const s=ne[a];return e.createElement(c,null,e.createElement("div",{className:"header"},e.createElement("div",{className:"header-spacer"},s&&e.createElement(P,{className:"header-close",onClick:e=>{e.stopPropagation(),e.preventDefault(),l()},children:e.createElement(L,{icon:s})})),e.createElement("div",{className:"header-middle"},e.createElement("div",{className:"header-title"},t),n?e.createElement("div",{className:"header-subtitle"},n):null),e.createElement("div",{className:"header-spacer"},r)),i)},le=({className:t,icon:n,title:a,message:l,children:r})=>e.createElement("div",{className:E("placeholder",t)},n?e.createElement(L,{icon:n}):null,a?e.createElement("div",{className:"title"},a):null,l?e.createElement("div",{className:"placeholder-message"},l):null,r),re=n((({},t)=>{const n=l();return i(t,(()=>({progress:(e,t)=>{n.current&&(n.current.style.opacity=1-e/t)}}))),e.createElement("div",{className:"shade shade-card",ref:n})})),ce=n((({title:t,subtitle:n,children:c,footer:i,headerRight:s,SearchComponent:o,disableGestures:m,onDrop:d,isVisible:u=!0,animateIn:h=!0,ShadeComponent:v=re,HeaderComponent:g,className:f},y)=>{y=y||l();const b=l(history.length>1).current,[N,k]=a(!1),x=l(),C=z(h?document.body.clientWidth:0),w=()=>C.spring(M).then((()=>{b&&p.goBack()})),{width:M}=j(y,{onCapture:e=>{if(b&&!m)return"x"===e.direction&&e.distance>0},onMove:e=>{C.setValue(Math.max(0,e.distance))},onUp:e=>{if(-1===e.flick)return w();C.spring(0)}});r((()=>{M&&h&&C.spring(u?0:M)}),[h,u,M]),r((()=>C.on((e=>{y.current&&(y.current.style.transform=`translateX(${e}px)`),x.current&&x.current.progress(e,M)}))),[M]);return e.createElement("div",{className:"layer"},v?e.createElement(v,{ref:x}):null,e.createElement("div",{className:E("card",h&&"animate",f),ref:y,onDragOver:d&&(e=>{e.preventDefault()}),onDragEnter:d&&(e=>{k(!0)}),onDragLeave:d&&(e=>{k(!1)}),onDrop:d&&(e=>{k(!1),d(e)})},null===g?null:g||e.createElement(ae,{title:t,subtitle:n,presentation:"card",SearchComponent:o,onClose:w,headerRight:s}),e.createElement("div",{className:"card-body",children:c}),i,N?e.createElement(le,{className:"drop-zone",icon:"upload",title:"Upload"}):null))})),ie=({active:t,undetermined:n})=>e.createElement("div",{className:E("toggle-check",t&&"active",n&&"undetermined")},e.createElement(L,{icon:n?"horizontal_rule":t?"check":null}));let se={};const oe=n((({children:t,title:n,headerRight:a,onClose:c,isVisible:s,animateIn:o,className:m},d)=>{const u=l(),h=l(),v=z(o?0:1),g=()=>p.goBack(1);i(d,(()=>({close:g})));const{width:y,height:b}=j(u,{onCapture:e=>"x"===e.direction&&e.distance>0,onMove(e){v.setValue(1-e.distance/e.size)},onUp(e){if(-1===e.flick)return g();v.spring(1)}});return r((()=>{o&&(s?v.spring(1):v.spring(0))}),[o,s]),r((()=>v.on((e=>{const t=1-e,n=se.x*t,a=se.y*t;u.current.style.transform=`translate(${n}px, ${a}px)`,u.current.style.width=f(e),u.current.style.height=f(e),h.current.style.transform=`translate(${-1*n}px, ${-1*a}px)`,h.current.style.opacity=e}))),[y,b]),e.createElement("div",{className:"layer reveal",ref:u},e.createElement("div",{className:E("card reveal-content",m),ref:h},e.createElement(ae,{title:n,onClose:g,headerRight:a,presentation:"card"}),e.createElement("div",{className:"card-body",children:t})))})),me=(e,t)=>Object.assign(se,{x:e,y:t}),de=e=>{const t=e.currentTarget.getBoundingClientRect();me((t.left+t.right)/2,(t.top+t.bottom)/2)},ue=({title:t,icon:n,href:a})=>e.createElement(P,{href:a,className:"springboard-icon",onClick:de},e.createElement("div",{className:"icon-frame"},e.createElement(L,{icon:n})),e.createElement("div",{className:"springboard-icon-name"},t)),he=({title:t,icon:n,onClick:a,href:l,disabled:r,children:c,active:i})=>e.createElement(V,{className:"dropdown-item",onClick:a,disabled:r,active:i,children:c,href:l,leftIcon:n,title:t}),pe=({title:t,children:n,isVisible:a,onClose:l})=>a?e.createElement("div",{className:"corner-dialog"},e.createElement("div",{className:"corner-dialog-title"},t,e.createElement(L,{icon:"close",onClick:l})),n):null,ve=({emoji:t})=>e.createElement("span",{className:"emoji",children:t}),ge=({icon:t,title:n,loading:a,disabled:l,active:r=!0,href:i,onPress:s})=>e.createElement(P,{className:E("fab",!n&&"round"),loading:a,disabled:l,active:r,onClick:s,href:i},a?e.createElement(g,{color:"#000"}):e.createElement(c,null,e.createElement(L,{icon:t}),n&&e.createElement("div",{className:"fab-title"},n))),Ee=({title:t,children:n,footer:a,headerRight:c,SearchComponent:i})=>{const s=l(),o=z(0);return r((()=>(o.spring(1),o.on((e=>{s.current.style.opacity=e})))),[]),e.createElement("div",{className:"fullscreen",ref:s},e.createElement(ae,{title:t,presentation:"full",onClose:()=>{o.spring(0).then((()=>p.goBack()))},headerRight:c,SearchComponent:i}),e.createElement(B,{className:"card-body"},n),a)},fe=({position:t,button:n,content:l})=>{const[c,i]=a(!1);return r((()=>{if(!c)return;const e=e=>{e.composedPath().some((e=>e.classList&&e.classList.contains("dropdown-content")))||i(!1)};return setTimeout((()=>{window.addEventListener("click",e,{passive:!1})}),0),()=>window.removeEventListener("click",e)}),[c]),e.createElement("div",null,e.createElement("span",{className:"dropdown"},e.createElement("div",{children:n,className:"dropdown-button",onClick:()=>{console.log("show"),i(!0)}}),e.createElement("div",{className:E("dropdown-content",t||"top-right",c?"visible":"hidden"),children:l})))};class ye{constructor(e){this.listeners=[],this.values=e,this.initialValues=b(e)}set=(e,t=!0)=>{Object.assign(this.values,e),t&&this.end(),this.listeners.forEach((e=>e(this.values)))};spring=(e,t=ye.defaultDuration)=>new Promise((n=>{if(N(e,this.values))return n();const a=this.id=performance.now(),l=b(this.values),r=c=>{if(a!==this.id)return;const i=Math.max(0,c-a);if(i>=t)this.set(e,!0),n();else{const n=Object.keys(e).reduce(((n,a)=>(n[a]=l[a]+(e[a]-l[a])*x(i/t),n)),{});this.set(n,!1),requestAnimationFrame(r)}};r(a)}));on=e=>(this.listeners.push(e),()=>this.listeners=this.listeners.filter((t=>t!==e)));stop=()=>{delete this.id};end=()=>{delete this.id,this.initialValues=b(this.values)}}ye.defaultDuration=300;const be=e=>t((()=>new ye(e)),[]),Ne=({children:t,onClose:n})=>{const a=l(null),c=be({zoom:1,panX:0,panY:0});r((()=>c.on((e=>{a.current.style.transform=`scale(${e.zoom}) translateX(${e.panX/e.zoom}px) translateY(${e.panY/e.zoom}px)`}))),[]);const i=()=>{const e=a.current.querySelector("img"),t=e.clientWidth*c.values.zoom,n=e.clientHeight*c.values.zoom;return{maxPanX:t>a.current.clientWidth?(t-a.current.clientWidth)/2:0,maxPanY:n>a.current.clientHeight?(n-a.current.clientHeight)/2:0}};return j(a,{onCapture(e){const{maxPanX:t,maxPanY:n}=i();return"x"===e.direction&&t>0||("y"===e.direction&&n>0||!!e.pinch)},onPinch(e){const{maxPanX:t,maxPanY:n}=i(),a=c.initialValues.zoom*e.scale;c.set({zoom:a,panX:y(c.initialValues.panX,-t,t),panY:y(c.initialValues.panY,-n,n)},!1)},onMove(e){if(c.values.zoom<=1)return;const{maxPanX:t,maxPanY:n}=i();c.set({panX:t&&y(c.initialValues.panX+e.d.x,-t,t),panY:n&&y(c.initialValues.panY+e.d.y,-n,n)},!1)},onUp:e=>c.values.zoom<1?c.spring({zoom:1,panX:0,panY:0}):c.values.zoom>3?c.spring({zoom:3}):void c.end(),onDoubleTap(){1===c.values.zoom?c.spring({zoom:3}):c.spring({zoom:1,panX:0,panY:0})}},[]),e.createElement("div",{className:"gallery-item",ref:a,children:t})},ke=({icon:t,title:n,badge:a,loading:l,disabled:r,onClick:c,active:i,href:s})=>e.createElement(P,{className:E("header-button center","Cancel"===n&&"header-cancel"),onClick:c,loading:l,disabled:r,active:i,href:s},t?e.createElement(L,{icon:t}):null,n?e.createElement("span",null,n):null,a?e.createElement("span",{className:"badge"},a):null),xe=({title:t,items:n=[],keyExtractor:a=(e=>e._id),renderItem:l,loading:r,className:i,ListEmptyComponent:o,HeaderComponent:m,children:d,showSeparators:u=!0})=>e.createElement("div",{className:E("list",i)},t?e.createElement(c,null,e.createElement("div",{className:"list-title"},t),e.createElement("hr",null)):null,m,n.length||d?e.createElement("div",{className:"list-body"},r||!n?null:o&&0===n.length?o:n.map(((t,r)=>e.createElement(c,{key:a(t)},l(t,r),u&&r<n.length-1&&e.createElement("hr",null)))),s.map(d,((t,n)=>e.createElement(c,{key:n},t,n<d.length-1&&e.createElement("hr",null))))):o),Ce=d([]),we=t=>e.createElement("div",{key:t.id,className:"layer",children:t.children}),Me=()=>u(Ce).map(we),ze=e=>Ce.update([...Ce.state,{id:Math.random(),children:e}]),Pe=()=>{Ce.update([])},Se=({ar:t,url:n,alt:a,className:l,children:r,base64Png:c})=>e.createElement("div",{className:E("img",l)},e.createElement("div",{style:{paddingTop:100*(t||1)+"%"}}),n?e.createElement("img",{src:n,className:"img-real",alt:a,draggable:!1}):c?e.createElement("img",{src:`data:image/png;base64,${c}`}):e.createElement("div",{className:"img-real",alt:a,draggable:!1}),r?e.createElement("div",{className:"img-inside"},r):null),$e=d([]),Le=({title:t,body:n,onDismiss:a=(()=>null)})=>{const c=l(),i=z(0);j(c,{onCapture:e=>"x"===e.direction,onMove(e){i.setValue(e.distance/e.size)},onUp(e){e.flick?i.spring(-e.flick):i.spring(0)}},[]);return r((()=>i.on((e=>{c.current.style.opacity=1-Math.abs(e),c.current.style.transform=`translateX(${f(e)})`}))),[]),e.createElement("div",{className:"notification",ref:c},e.createElement("div",null,e.createElement("div",{className:"notification-title"},t),e.createElement("div",{className:"notification-body"},n)),e.createElement(P,{onClick:()=>{i.spring(1).then(a)}},e.createElement(L,{icon:"close"})))},Ve=()=>{const t=u($e);return 0===t.length?null:e.createElement("div",{className:"layer notifications-container"},t.map((t=>e.createElement(Le,t))))},De=e=>{$e.update([...$e.state,{key:h(),...e}])},Te=({percent:t})=>e.createElement("div",{className:"percent-bar"},e.createElement("div",{className:"percent-bar-inner",style:{width:100*t+"%"}})),Xe=({title:t,color:n,onClick:a})=>e.createElement(P,{className:"pill",onClick:a,style:{backgroundColor:n}},t),Ye=()=>e.createElement("div",{className:"progress-indicator"}),Re=({title:t,LeftComponent:n,caret:a=!0,checked:l,active:r,href:c,onPress:i})=>e.createElement(P,{className:"filter-button",onClick:i,active:r,interactive:!0,href:c},n,t?e.createElement("div",{className:"filter-button-title"},t):null,a?e.createElement(L,{className:"filter-button-caret",icon:"expand_more"}):e.createElement(ie,{active:l})),je=d(),Ue=()=>{const t=u(je);return r((()=>{if(!t)return;const e=setTimeout((()=>je.update(null)),2e3);return()=>clearTimeout(e)}),[t]),t?e.createElement("div",{className:"toast-container"},e.createElement("div",{className:"toast",children:t})):null},We=je.update,Ie=()=>e.createElement(c,null,e.createElement(Ve,null),e.createElement(Me,null),e.createElement(O,null),e.createElement(Q,null),e.createElement(Ue,null)),Oe=({color:t="#fff",size:n=20,percent:a,spinning:l,completedIcon:r="check"})=>{if(l||!a)return e.createElement(Ye,null);if(1===a)return e.createElement(L,{icon:r});const c=n/2,i=c-1,s=2*i*Math.PI,o=s-a*s;return e.createElement("svg",{height:n,width:n},e.createElement("circle",{stroke:t,opacity:.3,fill:"transparent",strokeWidth:2,r:i,cx:c,cy:c}),e.createElement("circle",{strokeDasharray:s+" "+s,style:{strokeDashoffset:o,transform:"rotate(-90deg)",transformOrigin:"50% 50%"},stroke:t,fill:"transparent",strokeWidth:2,r:i,cx:c,cy:c}))},_e=({active:t,icon:n,title:a,elaboration:l,subtitle:r,value:c,disabled:i,onClick:s,children:o})=>e.createElement(V,{onClick:()=>{s(c)},disabled:i,className:"radio-btn",active:t},e.createElement("div",{className:"radio-top"},e.createElement("div",{className:"dot"},e.createElement("div",{className:"dot-inside"})),n&&e.createElement(L,{icon:n}),e.createElement("div",{className:"radio-title"},a)),o&&e.createElement("div",{className:"radio-subtitle"},o),r&&e.createElement("div",{className:"radio-subtitle"},r),t&&l&&e.createElement("div",{className:"radio-subtitle",children:l})),He=n((({item:t,isLast:n,active:a,onChange:l,index:r},i)=>e.createElement(c,null,e.createElement(P,{children:t.name,onClick:()=>l(t.value),active:a,ref:i}),n?null:e.createElement("div",{className:"separator"})))),Ae=({options:t,value:n,onChange:a})=>{const c=l([]),i=l(),s=t.findIndex((e=>e.value===n)),o=z(0),m=z(0);return r((()=>{o.on((e=>i.current.style.transform=`translateX(${e}px)`)),m.on((e=>i.current.style.width=`${e}px`))}),[]),r((()=>{const e=c.current[s];0===m.value?(o.setValue(e.offsetLeft),m.setValue(e.offsetWidth)):(o.spring(e.offsetLeft),m.spring(e.offsetWidth))}),[s]),e.createElement("div",{className:"segmented"},e.createElement("div",{className:"segmented-indicator",ref:i}),t.map(((n,l)=>e.createElement(He,{key:n.value,item:n,index:l,isLast:l===t.length-1,active:s===l,onChange:a,ref:e=>c.current[l]=e}))))},Be=({options:t,value:n,disabled:a,autoComplete:l,onChangeValue:r})=>e.createElement("select",{className:E("text select",a&&"disabled"),onChange:e=>r(e.target.value),value:n,disabled:a,autoComplete:l},(()=>{if(t instanceof Array)return t.map((t=>e.createElement("option",{key:t.value,value:t.value,children:t.name})));Object.keys(t).map((n=>e.createElement("option",{key:n,value:n,children:t[n]})))})()),Fe=({leftText:t,rightText:n})=>e.createElement("div",{className:"tabular-row"},e.createElement("div",{className:"tabular-row-left"},t),e.createElement("div",{className:"tabular-row-right"},n)),qe=(e,t=0)=>{let n=3735928559^t,a=1103547991^t;for(let t,l=0;l<e.length;l++)t=e.charCodeAt(l),n=Math.imul(n^t,2654435761),a=Math.imul(a^t,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(a^a>>>13,3266489909),a=Math.imul(a^a>>>16,2246822507),a^=Math.imul(n^n>>>13,3266489909),4294967296*(2097151&a)+(n>>>0)},Ke=360/Math.pow(2,53),Ge=o((({tag:t,count:n})=>{const a=(e=>`hsl(${180-Ke*qe(e)}, 100%, 50%)`)(t);return e.createElement("div",{className:"tag",style:{borderColor:a,color:a},children:`${t}  ${n||""}`})})),Je={code:"one-time-code"},Qe={phone:"tel",code:"tel"},Ze=n((({placeholder:t,value:n="",icon:l,type:r="text",dnt:c,disabled:i,rows:s=0,className:o,onFocus:d,autoComplete:u,onClick:h,maxLength:p,id:v,onChangeText:f=(()=>null),autoFocus:y,loading:b,RightComponent:N,countryCode:k,onChangePhone:x,lowerCase:C,min:w,max:M,onPressCountry:z,countries:S},$)=>{const[V,D]=a(n);return e.createElement("div",{className:"text-input"},"phone"===r&&(()=>{const t=S?S.find((e=>e.code===k)):null;return t?e.createElement(P,{className:"text-input-country",onClick:z},e.createElement("span",{className:"emoji"},t.flag),t.prefix):null})(),l?e.createElement(L,{className:"text-input-icon",icon:l}):"username"===r?e.createElement("span",{className:"text-input-icon"},"@"):"search"===r?e.createElement(L,{className:"text-input-icon",icon:"search"}):void 0,m("textarea"===r||s?"textarea":"input",{type:Qe[r]||r,autoComplete:Je[r],maxLength:p,className:E("text",i&&"disabled",c&&"fs-hide",o),readOnly:i,onChange:e=>{let t=e.target.value;D(t),"phone"===r?t=t.replace(/[^0-9]/g,""):(C&&(t=t.toLowerCase()),p&&(t=t.slice(0,p)),"username"===r&&(t=t.replace(/\s/g,""))),f(t)},value:(e=>{if("phone"===r&&k){const t=S.find((e=>e.code===k)),n=e.split("");return t.example.split("").map((e=>{if(n.length)return"X"===e?n.shift():e})).filter(Boolean).join("")}return e})(n),autoCapitalize:C&&"none",placeholder:t,rows:s,onFocus:d,onClick:h,id:v,autoFocus:y,ref:$,min:w,max:M}),l?e.createElement("img",{className:"text-input-icon",src:l}):null,N,b?e.createElement("div",{className:"text-input-spinner"},e.createElement(g,{size:18})):null,"search"!==r?null:n?e.createElement(P,{onClick:()=>f("")},e.createElement(L,{icon:"cancel",className:"text-input-clear"})):void 0)})),et=({href:t,onClick:n,children:a,disabled:l,className:r})=>e.createElement(P,{className:E("touchable-highlight",l&&"disabled",r),onClick:n,href:t,children:a}),tt=n((({children:t,title:n,search:a,onChangeSearch:c,searchLoading:s,headerRight:o,onClose:m,isVisible:d,presentation:u="modal"},h)=>{const v=l(),g=l(),E=z(0),f=()=>{m?E.spring(0).then(m):p.goBack(1)};i(h,(()=>({close:f})));const{height:y}=j(g,{onCapture:e=>"y"===e.direction&&e.distance>0,onMove:e=>{E.setValue(y-Math.max(0,e.distance))},onUp:e=>{if(-1===e.flick)return f();E.spring(e.size)}});return r((()=>{y&&(d||m?E.spring(y):E.spring(0))}),[d,y]),r((()=>{const e=document.querySelectorAll(".card");return E.on((t=>{const n=t/y;g.current&&(g.current.style.transform=`translateY(-${t}px)`),v.current&&(v.current.style.display=t?"block":"none",v.current.style.opacity=t/y),[...e].forEach((e=>{e.parentElement.style.transform=`scale(${1-.04*n})`}))}))}),[y]),e.createElement("div",{className:"layer"},e.createElement("div",{className:`shade shade-${u}`,ref:v}),e.createElement("div",{className:`window window-${u}`,ref:g},"modal"===u?e.createElement(ae,{title:n,presentation:"modal",onClose:f,SearchComponent:c?e.createElement("div",{className:"header-search"},e.createElement(Ze,{placeholder:"Search",type:"search",value:a,onChangeText:c,loading:s})):null,headerRight:o}):null,e.createElement("div",{className:"card-body",children:t})))})),nt=({pan:t,i:n})=>{const a=l();return r((()=>t.on((e=>{const t=Math.abs(n-e);a.current.style.opacity=Math.max(.5,1-t)}))),[]),e.createElement("div",{className:"pager-dot",ref:a,style:{opacity:t.value===n?1:.5}})},at=({title:t,i:n,pan:a,onPress:c})=>{const i=l();return r((()=>a.on((e=>{const t=Math.abs(n-e);i.current.style.opacity=Math.max(.5,1-t)}))),[]),e.createElement("div",{children:t,className:"pager-tabs-title",onClick:()=>c(n),ref:i,style:{opacity:a.value===n?1:.5}})},lt=n((({titles:t,children:n,vertical:a,dots:c,className:o,page:m=0,gap:d=0},u)=>{const h=z(m),p=l(),v=l(),g=l({}).current,y=s.count(n)-1,b=a?"y":"x",N=C(0,y);i(u,(()=>({scrollToPage:e=>h.spring(N(e))})));const{width:k,height:x}=j(v,{pointerControls:!0,onCapture(e){if(e.direction===b)return e.distance<0||g.initPan-e.distance/e.size>0},onDown(e){h.end(),g.currentPage=Math.round(h.value),g.initPan=h.value},onMove(e){const t=N(g.initPan-e.distance/e.size);h.setValue(t)},onPan(e){const t=e[b],n=h.value-t.distance/t.size;h.setValue(N(n))},onUp(e){if(e.flick){const t=N(g.currentPage+e.flick);h.spring(t,e.flickMs)}else{const e=N(Math.round(h.value));h.spring(e)}}},[n]);return r((()=>{h.spring(m)}),[m]),r((()=>h.on((e=>{v.current.style.transform=a?`translateY(-${e*x+d*e}px)`:`translateX(-${e*k+d*e}px)`,p.current&&(p.current.style.transform=`translateX(${f(e)})`)}))),[a,x,k]),e.createElement("div",{className:E("pager",a?"vertical":"horizontal",o)},t?e.createElement("div",{className:"pager-tabs"},t.map(((t,n)=>e.createElement(at,{key:n,title:t,pan:h,i:n,onPress:h.spring}))),k?e.createElement("div",{className:"pager-tabs-indicator",ref:p,style:{width:f(1/t.length)}}):null):null,e.createElement("div",{className:"pager-scroller"},e.createElement("div",{className:"pager-canvas",ref:v,style:{transform:a?`translateY(calc(-${f(m)} - ${m*d}px))`:`translateX(calc(-${f(m)} - ${m*d}px))`}},s.map(n,((t,n)=>e.createElement("div",{key:n,className:"pager-page",children:t,style:a?{marginBottom:d}:{marginRight:d}}))))),c?e.createElement("div",{className:"pager-dots"},s.map(n,((t,n)=>e.createElement(nt,{key:n,pan:h,i:n})))):null)})),rt=new Map,ct=e=>function(...t){const n=t[0];return rt.has(n)||rt.set(n,e.apply(this,t)),rt.get(n)},it=ct((e=>new Promise((t=>{const n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n.onload=()=>t(),document.head.appendChild(n)})))),st=ct(((e,t)=>new Promise((n=>{const a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,a.onload=()=>n(window[t]),document.head.appendChild(a)})))),ot=({width:e,height:t})=>{document.documentElement.style.setProperty("--viewport-width",`${e}px`),document.documentElement.style.setProperty("--viewport-height",`${t}px`)};ot({width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}),new ResizeObserver((e=>{ot(e[0].contentRect)})).observe(document.documentElement);const mt=navigator.virtualKeyboard,dt=()=>r((()=>{if(mt)return mt.overlaysContent=!0,()=>mt.overlaysContent=!1}),[]);export{O as ActionSheet,g as ActivityIndicator,Q as Alert,M as AnimatedValue,ye as Animation,H as Avatar,U as BottomSheet,F as BreadCrumbs,q as Button,ce as Card,ie as CheckBox,ee as CircleCheck,te as ConnectionIndicator,pe as CornerDialog,ue as DashboardIcon,fe as Dropdown,he as DropdownItem,ve as Emoji,ge as Fab,Re as FilterButton,Ee as FullScreen,Ne as GalleryItem,ke as HeaderButton,L as Icon,Se as Image,xe as List,Me as Modal,Ve as Notifications,Te as PercentBar,Xe as Pill,le as Placeholder,Ie as PoonOverlays,Ye as ProgressIndicator,Oe as ProgressRing,A as PullIndicator,_e as RadioButton,oe as Reveal,ae as ScreenHeader,B as ScrollView,Ae as SegmentedController,Be as Select,re as Shade,Fe as TabularRow,Ge as Tag,Ze as TextInput,Ue as Toast,P as Touchable,et as TouchableHighlight,V as TouchableRow,lt as ViewPager,tt as Window,k as bounce,E as c,y as clamp,b as clone,C as createClamp,qe as cyrb53,x as easeOutCubic,Pe as hideModal,w as lerp,it as loadCss,st as loadScript,ct as memoize,Ce as modalState,N as sameObject,me as setRevealOrigin,_ as showActionSheet,Z as showAlert,ze as showModal,De as showNotification,f as toPercent,We as toast,z as useAnimatedValue,be as useAnimation,j as useGesture,D as useSize,dt as useVirtualKeyboard};
