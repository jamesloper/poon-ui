import e,{useMemo as t,forwardRef as n,useState as a,useRef as l,useEffect as r,Fragment as c,useImperativeHandle as i,Children as s,memo as o,createElement as d}from"react";import{randomId as m,createBus as u,useBus as h}from"poon-router/util.js";import{navigation as p}from"poon-router";const v=(...e)=>e.filter(Boolean).join(" "),g=e=>100*e+"%",E=(e,t,n)=>Math.min(Math.max(e,t),n),f=e=>Object.assign({},e),y=(e,t)=>Object.keys(e).every((n=>e[n]===t[n])),b=(e,t,n)=>e>n?n+(n+e)/50:e<t?t-(t-e)/50:e,k=e=>--e*e*e+1;class N{constructor(e){this.listeners=[],this.value=e,this.oldValue=e}setValue=(e,t=!0)=>{t&&(delete this.id,this.oldValue=e),this.value=e,this.listeners.forEach((t=>t(e)))};spring=(e,t=N.defaultAnimationDuration)=>new Promise((n=>{if(e===this.value)return;const a=this.id=performance.now(),l=this.value,r=c=>{if(a!==this.id)return;const i=Math.max(0,c-a);if(i>=t)this.setValue(e,!0),n();else{const n=(e-l)*k(i/t);this.setValue(l+n,!1),requestAnimationFrame(r)}};r(a)}));on=e=>(this.listeners.push(e),()=>this.listeners=this.listeners.filter((t=>t!==e)));stop=()=>{delete this.id}}N.defaultAnimationDuration=300;const x=e=>t((()=>new N(e)),[]),C=n((({href:t,onClick:n,className:r,active:c,target:i,children:s,style:o,disableMenu:d},m)=>{const[u,h]=a(!1),p=l(!1),g=e=>{e.button&&0!==e.button||(e.stopPropagation(),p.current=!1,h(!0))},E=()=>{h(!1)};return e.createElement(t?"a":"button",{href:t,onTouchStart:g,onTouchMove:E,onTouchEnd:E,onMouseDown:g,onMouseUp:E,onMouseLeave:E,onClick:e=>{if(p.current)return e.preventDefault();n&&(t||e.preventDefault(),n(e))},className:v("touchable",r,u&&"touched",d&&"disable-menu",c&&"active"),target:i,draggable:!1,onContextMenu:d?e=>(e.preventDefault(),!1):void 0,style:o,type:"button",ref:m},s)})),w=/iPad|iPhone|iPod/.test(navigator.platform),M={"os:back":w?"arrow_back_ios":"arrow_back","os:share":w?"ios_share":"share","os:close":w?"keyboard_arrow_down":"close"},P=({icon:t,className:n,color:a,title:l,size:r,onClick:c})=>e.createElement("i",{className:v("material-icons",n),style:{color:a,fontSize:r},title:l,onClick:c,children:M[t]||t}),z=({title:t,meta:n,leftIcon:a,href:l,onClick:r,onPressMore:c,target:i,children:s,caret:o,disabled:d,RightComponent:m,className:u,active:h})=>e.createElement(C,{className:v("touchable-highlight touchable-row",d&&"disabled",u),onClick:r,href:l,target:i,active:h},e.createElement("div",{className:"touchable-row-left"},"string"==typeof a?e.createElement("div",{className:"touchable-row-icon"},e.createElement(P,{icon:a})):null,"object"==typeof a?e.createElement("div",{className:"touchable-row-icon"},a):null,e.createElement("div",{className:"touchable-row-content"},t?e.createElement("div",{className:"touchable-row-title",children:t}):null,n?e.createElement("div",{className:"meta",children:n}):null,s)),m,c?e.createElement(C,{onClick:c},e.createElement(P,{icon:"more_vert"})):null,o?e.createElement(P,{icon:"chevron_right"}):null),L=e=>{const[t,n]=a({width:e.current?.clientWidth,height:e.current?.clientHeight});return r((()=>{if(!e.current)return;const t=new ResizeObserver((e=>{const t=e[0].borderBoxSize[0];n({height:t.blockSize,width:t.inlineSize})}));return t.observe(e.current),t.disconnect.bind(t)}),[]),t},S={capture:!1,passive:!1},D=(e=0,t,n)=>{const a=Math.min(n,50)/50;return e*(1-a)+t*a};let T;const Y=(e,t=0)=>({x:e.touches?e.touches[t].clientX:e.clientX,y:e.touches?e.touches[t].clientY:e.clientY}),X=(e,t={},n)=>{const{width:a,height:c}=L(e),i=l({id:m()}).current;return r((()=>{if(!e.current)return;const n=e=>{const t=e-i.last.ts;if(t>0){const n=(i.x-i.last.x)/t,a=(i.y-i.last.y)/t;i.v={x:D(i.v.x,n,t),y:D(i.v.y,a,t)},i.last={x:i.x,y:i.y,ts:e}}},l=e=>{T=null;const{x:n,y:l}=Y(e);if(Object.assign(i,{width:a,height:c,locked:!1,touch:!0,origin:{x:n,y:l},current:{x:n,y:l},v:{x:0,y:0},s:{x:0,y:0},d:{x:0,y:0},flick:null,last:{ts:performance.now(),x:n,y:l}}),2!==e.touches.length)t.onDown&&t.onDown(i);else{const t=Y(e,1),a=n-t.x,r=l-t.y;i.pinch={d0:Math.sqrt(Math.pow(a,2)+Math.pow(r,2))}}},r=a=>{if(T&&T!==e.current)return;const{x:l,y:r}=Y(a);if(i.pinch)if(2===a.touches.length){i.locked="pinch";const e=Y(a,1),n=l-e.x,c=r-e.y;i.pinch.d=Math.sqrt(Math.pow(n,2)+Math.pow(c,2)),i.pinch.scale=i.pinch.d/i.pinch.d0,i.pinch.center={x:(l+e.x)/2,y:(r+e.y)/2},t.onPinch&&t.onPinch(i)}else delete i.pinch;else i.x=l,i.y=r,n(a.timeStamp),i.d={x:i.x-i.origin.x,y:i.y-i.origin.y},i.abs={x:Math.abs(i.d.x),y:Math.abs(i.d.y)},!i.locked&&(i.abs.y>10||i.abs.x>10)&&(i.locked=i.abs.y>i.abs.x?"y":"x");if(i.locked){if("x"===i.locked&&(i.distance=i.d.x,i.size=i.width),"y"===i.locked&&(i.distance=i.d.y,i.size=i.height),i.touch=!t.onCapture||t.onCapture({direction:i.locked,distance:i.distance,size:"x"===i.locked?i.width:i.height}),!i.touch)return;T=e.current,t.onMove&&t.onMove({d:i.d,direction:i.locked,distance:i.distance,velocity:i.v[i.locked],size:i.size},a)}},s=a=>{if(T&&T!==e.current)return;if(!i.touch||!i.locked)return;n(a.timeStamp);const l=i.v[i.locked],r=Math.abs(l),c=i.d[i.locked],s=r>=.25&&Math.sign(l)||Math.abs(c)>i.size/2&&Math.sign(c);t.onUp&&t.onUp({direction:i.locked,velocity:l,flick:s,flickedLeft:"x"===i.locked&&-1===s,flickedRight:"x"===i.locked&&1===s,flickedUp:"y"===i.locked&&-1===s,flickedDown:"y"===i.locked&&1===s,springMs:r>.25?i.size-Math.abs(c)/r:300,size:i.size})},o=n=>{e.current.scrollTop+=n.deltaY,t.onPan&&t.onPan({d:{x:n.deltaX,y:n.deltaY}})};return e.current.addEventListener("touchstart",l,S),e.current.addEventListener("touchmove",r,S),e.current.addEventListener("touchend",s,S),e.current.addEventListener("wheel",o,S),t.onDoubleTap&&e.current.addEventListener("dblclick",t.onDoubleTap,S),()=>{e.current&&(e.current.removeEventListener("touchstart",l),e.current.removeEventListener("touchmove",r),e.current.removeEventListener("touchend",s),e.current.removeEventListener("wheel",o),t.onDoubleTap&&e.current.removeEventListener("dblclick",t.onDoubleTap))}}),[e,c,a,n]),{height:c,width:a}},V=n((({className:t,visible:n,pan:a,children:c,onClose:i,onPress:s,showShade:o,showHandle:d},m)=>{const u=l(),h=l(),{height:p}=X(h,{onCapture:e=>"y"===e.direction,onMove:e=>{a.setValue(e.size-Math.max(e.distance/100,e.distance))},onUp:e=>{if(e.flickedDown)return a.spring(0,e.springMs).then(i);a.spring(e.height)}});return r((()=>{if(p)return a.on((e=>{h.current.style.transform=`translateY(-${e}px)`,u.current&&(u.current.style.opacity=e/p)}))}),[p]),r((()=>{p&&(n?a.spring(p):a.spring(0).then(i))}),[n,p,i]),e.createElement("div",{className:"layer"},n&&o?e.createElement("div",{className:"shade shade-bottom-sheet",ref:u,onClick:()=>a.spring(0).then(i)}):null,e.createElement("div",{ref:h,className:v("sheet",t),onClick:s},d?e.createElement("div",{className:"handle"}):null,c))})),$=u(null),R=new N(0),U=()=>{const t=h($);return t?e.createElement(V,{pan:R,visible:!!t,onClose:()=>$.update(null),showShade:!0},e.createElement("div",{className:"action-sheet-title"},t&&t.title),e.createElement("hr",null),t.options.map(((n,a)=>e.createElement(z,{key:a,title:n.name,leftIcon:n.icon,onClick:e=>{n.onClick&&n.onClick(),t.callback&&t.callback(n.value),R.spring(0).then((()=>$.update(0)))},disabled:n.disabled,target:n.target,href:n.href})))):null},j=(e,t,n)=>$.update({title:e,options:t,callback:n}),O=n((({pull:t},n)=>e.createElement("div",{className:"pull-indicator center",ref:n},e.createElement(P,{icon:"refresh",color:"#000"})))),W=n((({children:t,className:n,onRefresh:a,horizontal:i},s)=>{const o=s||l(),d=l(),m=l({}).current,u=x(0),h=x(0),p=x(0);X(o,{onDown:()=>{m.canScrollVertical=o.current.scrollHeight>o.current.clientHeight,m.canScrollHorizontal=o.current.scrollWidth>o.current.clientWidth,m.initScrollTop=o.current.scrollTop,m.initScrollLeft=o.current.scrollLeft,h.stop(),p.stop()},onCapture:e=>"y"===e.direction?!!(a&&0===o.current.scrollTop&&e.distance>0)||!!m.canScrollVertical&&(0===m.initScrollTop&&e.distance<0||m.initScrollTop>0):"x"===e.direction?!!m.canScrollHorizontal:void 0,onMove:e=>{"y"===e.direction?a&&0===m.initScrollTop?u.setValue(Math.min(70,e.distance)):h.setValue(m.initScrollTop-e.distance):"x"===e.locked&&p.setValue(m.initScrollLeft-e.distance)},onUp:e=>{"y"===e.direction?a&&0===m.initScrollTop?e.distance>70?u.spring(0).then(a):u.spring(0):e.velocity&&h.spring(h.value-2e3*e.velocity,2e3):"h"===e.locked&&e.velocity&&p.spring(p.value-2e3*e.velocity,2e3)}}),r((()=>h.on((e=>{o.current.scrollTop=e}))),[]),r((()=>p.on((e=>o.current.scrollLeft=e))),[]),r((()=>{if(a)return u.on((e=>{const t=e/70;d.current.style.transform=`translateY(${e}px) rotate(${360*t}deg)`,d.current.style.opacity=t}))}),[]);return e.createElement(c,null,a?e.createElement("div",{className:"list-pull"},e.createElement(O,{pull:u,ref:d})):null,e.createElement("div",{className:v("scroller",n,i?"horizontal":"vertical"),ref:o,onScroll:()=>{navigator.virtualKeyboard?.hide(),document.activeElement.blur()},children:t}))})),I=new Array(12).fill(0),_=({size:t=16,color:n="#fff"})=>e.createElement("div",{className:"activity-indicator",style:{width:t,height:t},children:I.map(((a,l)=>{const r={width:1.7,borderRadius:1,left:t/2-1,height:t/4,animationDelay:(.1*l-1.1).toFixed(1)+"s",transform:`rotate(${30*l}deg)`,backgroundColor:n,transformOrigin:`50% ${t/2}px`};return e.createElement("div",{key:l,style:r})}))}),H=({className:t,title:n,onClick:a,onDown:l,icon:r,href:i,tabIndex:s,color:o,disabled:d,download:m,iconImageUrl:u,loading:h,submit:p,fullWidth:g,target:E})=>{const f=v("btn",t,d&&"disabled",g&&"full-width",o&&`btn-${o}`);return e.createElement(C,{type:p?"submit":"button",className:f,onClick:e=>{m&&e.stopPropagation(),a&&a(e)},href:i,onTouchStart:l,tabIndex:s,children:h?e.createElement(_,null):e.createElement(c,null,u?e.createElement("img",{src:u,alt:n}):null,r?e.createElement(P,{icon:r}):null,n?e.createElement("span",null,n):null),target:E})},A=u([]),B=(e,t)=>{A.update(A.state.map((t=>(t===e&&(t.visible=!1),t)))),setTimeout((()=>{e.callback(t),A.update(A.state.filter((t=>t!==e)))}),300)},q=({alert:t,isLast:n})=>e.createElement("div",{className:v("alert-container",n&&t.visible&&t.className)},e.createElement("div",{className:v("alert",n&&t.visible&&"visible"),onClick:e=>e.stopPropagation()},e.createElement("div",{className:"alert-top"},t.title?e.createElement("div",{className:"alert-title"},t.title):null,t.message?e.createElement("div",{className:"alert-message"},t.message):null),t.options?e.createElement(W,{className:v("alert-buttons",t.options.length<=2&&"alert-buttons-horizontal"),children:t.options.map(((n,a)=>e.createElement(C,{key:a,className:v("alert-button",n.destructive&&"destructive"),onClick:()=>{n.onPress&&n.onPress(),B(t,n._id||n.value)},children:n.name,disableMenu:!0})))}):e.createElement("div",{className:"alert-bottom"},e.createElement(H,{color:"white",fullWidth:!0,title:"Close",onClick:()=>B(t)})))),F=()=>{const t=h(A),n=t.filter((e=>e.visible)).pop();return 0===t.length?null:e.createElement("div",{className:v("layer alert-backdrop",t.some((e=>e.visible))&&"visible"),onClick:()=>B(n),children:t.map((t=>e.createElement(q,{key:t.key,alert:t,isLast:n===t})))})},K=(e,t)=>new Promise((n=>{A.update([...A.state,{key:m(),callback:n,visible:!0,options:t,...e}])})),G=({path:t,onClickPath:n})=>{const a=t.split("/").filter(Boolean);return 0===a.length?null:e.createElement(W,{horizontal:!0,className:"breadcrumbs"},e.createElement(P,{icon:"home",onClick:()=>n("/")}),e.createElement("span",null," / "),a.map(((t,l)=>e.createElement(c,{key:t+"_"+l},e.createElement(C,{onClick:()=>n(),children:t}),l<a.length-1?e.createElement("span",null," / "):null))))},J={card:"os:back",modal:"os:close"},Q=({title:t,subtitle:n,presentation:a="card",onClose:l,headerRight:r,SearchComponent:i})=>{const s=J[a];return e.createElement(c,null,e.createElement("div",{className:"header"},e.createElement("div",{className:"header-spacer"},s&&e.createElement(C,{className:"header-close",onClick:e=>{e.stopPropagation(),e.preventDefault(),l()},children:e.createElement(P,{icon:s})})),e.createElement("div",{className:"header-middle"},e.createElement("div",{className:"header-title"},t),n?e.createElement("div",{className:"header-subtitle"},n):null),e.createElement("div",{className:"header-spacer"},r)),i)},Z=({className:t,icon:n,title:a,message:l,children:r})=>e.createElement("div",{className:v("placeholder",t)},n?e.createElement(P,{icon:n}):null,a?e.createElement("div",{className:"title"},a):null,l?e.createElement("div",{className:"placeholder-message"},l):null,r),ee=n((({},t)=>{const n=l();return i(t,(()=>({progress:(e,t)=>{n.current&&(n.current.style.opacity=1-e/t)}}))),e.createElement("div",{className:"shade shade-card",ref:n})})),te=n((({title:t,subtitle:n,children:c,footer:i,headerRight:s,hasScrollView:o=!0,SearchComponent:d,scrollerRef:m,disableGestures:u,onDrop:h,isVisible:g=!0,animateIn:E=!0,ShadeComponent:f=ee,HeaderComponent:y,className:b},k)=>{k=k||l();const N=l(history.length>1).current,[C,w]=a(!1),M=l(),P=x(E?document.body.clientWidth:0),z=()=>P.spring(L).then((()=>{N&&p.goBack()})),{width:L}=X(k,{onCapture:e=>{if(N&&!u)return"x"===e.direction&&e.distance>0},onMove:e=>{P.setValue(Math.max(0,e.distance))},onUp:e=>{if(e.flickedRight)return z();P.spring(0)}});r((()=>{L&&E&&P.spring(g?0:L)}),[E,g,L]),r((()=>P.on((e=>{k.current&&(k.current.style.transform=`translateX(${e}px)`),M.current&&M.current.progress(e,L)}))),[L]);return e.createElement("div",{className:"layer"},f?e.createElement(f,{ref:M}):null,e.createElement("div",{className:v("card",E&&"animate",b),ref:k,onDragOver:h&&(e=>{e.preventDefault()}),onDragEnter:h&&(e=>{w(!0)}),onDragLeave:h&&(e=>{w(!1)}),onDrop:h&&(e=>{w(!1),h(e)})},null===y?null:y||e.createElement(Q,{title:t,subtitle:n,presentation:"card",SearchComponent:d,onClose:z,headerRight:s}),o?e.createElement(W,{className:"card-body",ref:m,children:c}):e.createElement("div",{className:"card-body",children:c}),i,C?e.createElement(Z,{className:"drop-zone",icon:"upload",title:"Upload"}):null))})),ne=({active:t})=>e.createElement("div",{className:v("circle-check",t&&"active")},e.createElement(P,{icon:"check"})),ae=({status:t})=>"connected"===t?null:e.createElement("div",{className:"connection-indicator"},e.createElement("div",{className:"bubble"},e.createElement(_,null),t)),le=({imageId:t,className:n,variant:a,getUrl:l})=>t?e.createElement("img",{draggable:!1,className:v("avatar",n),src:l(t,a)}):e.createElement("div",{draggable:!1,className:v("avatar",n)});le.defaultProps={variant:"normal",getUrl:()=>null};const re=({active:t,undetermined:n})=>e.createElement("div",{className:v("toggle-check",t&&"active",n&&"undetermined")},e.createElement(P,{icon:n?"horizontal_rule":t?"check":null})),ce=({title:t,children:n,isVisible:a,onClose:l})=>a?e.createElement("div",{className:"corner-dialog"},e.createElement("div",{className:"corner-dialog-title"},t,e.createElement(P,{icon:"close",onClick:l})),n):null;let ie={};const se=n((({children:t,title:n,headerRight:a,onClose:c,isVisible:s,animateIn:o,className:d},m)=>{const u=l(),h=l(),E=x(o?0:1),f=()=>p.goBack(1);i(m,(()=>({close:f})));const{width:y,height:b}=X(u,{onCapture:e=>"x"===e.direction&&e.distance>0,onMove(e){E.setValue(1-e.distance/e.size)},onUp(e){if(e.flickedRight)return f();E.spring(1)}});return r((()=>{o&&(s?E.spring(1):E.spring(0))}),[o,s]),r((()=>E.on((e=>{const t=1-e,n=ie.x*t,a=ie.y*t;u.current&&(u.current.style.transform=`translate(${n}px, ${a}px)`,u.current.style.width=g(e),u.current.style.height=g(e)),h.current&&(h.current.style.transform=`translate(${-1*n}px, ${-1*a}px)`)}))),[y,b]),e.createElement("div",{className:"layer reveal",ref:u},e.createElement("div",{className:v("card reveal-content",d),ref:h},e.createElement(Q,{title:n,onClose:f,headerRight:a,presentation:"card"}),e.createElement("div",{className:"card-body",children:t})))})),oe=(e,t)=>Object.assign(ie,{x:e,y:t}),de=e=>{const t=e.currentTarget.getBoundingClientRect();oe((t.left+t.right)/2,(t.top+t.bottom)/2)},me=({title:t,icon:n,href:a})=>e.createElement(C,{href:a,className:"springboard-icon",onClick:de},e.createElement("div",{className:"icon-frame"},e.createElement(P,{icon:n})),e.createElement("div",{className:"springboard-icon-name"},t)),ue=({emoji:t})=>e.createElement("span",{className:"emoji",children:t}),he=({title:t,icon:n,onClick:a,href:l,disabled:r,children:c,active:i})=>e.createElement(z,{className:"dropdown-item",onClick:a,disabled:r,active:i,children:c,href:l,leftIcon:n,title:t}),pe=({position:t,button:n,content:l})=>{const[c,i]=a(!1);return r((()=>{if(!c)return;const e=e=>{e.composedPath().some((e=>e.classList&&e.classList.contains("dropdown-content")))||i(!1)};return setTimeout((()=>{window.addEventListener("click",e,{passive:!1})}),0),()=>window.removeEventListener("click",e)}),[c]),e.createElement("div",null,e.createElement("span",{className:"dropdown"},e.createElement("div",{children:n,className:"dropdown-button",onClick:()=>{console.log("show"),i(!0)}}),e.createElement("div",{className:v("dropdown-content",t||"top-right",c?"visible":"hidden"),children:l})))},ve=({icon:t,title:n,loading:a,disabled:l,active:r=!0,href:i,onPress:s})=>e.createElement(C,{className:v("fab",!n&&"round"),loading:a,disabled:l,active:r,onClick:s,href:i},a?e.createElement(_,{color:"#000"}):e.createElement(c,null,e.createElement(P,{icon:t}),n&&e.createElement("div",{className:"fab-title"},n))),ge=({title:t,children:n,footer:a,headerRight:c,SearchComponent:i})=>{const s=l(),o=x(0);return r((()=>(o.spring(1),o.on((e=>{s.current.style.opacity=e})))),[]),e.createElement("div",{className:"fullscreen",ref:s},e.createElement(Q,{title:t,presentation:"full",onClose:()=>{o.spring(0).then((()=>p.goBack()))},headerRight:c,SearchComponent:i}),e.createElement(W,{className:"card-body"},n),a)};class Ee{constructor(e){this.listeners=[],this.values=e,this.initialValues=f(e)}set=(e,t=!0)=>{Object.assign(this.values,e),t&&this.end(),this.listeners.forEach((e=>e(this.values)))};spring=(e,t=Ee.defaultDuration)=>new Promise((n=>{if(y(e,this.values))return;const a=this.id=performance.now(),l=f(this.values),r=c=>{if(a!==this.id)return;const i=Math.max(0,c-a);if(i>=t)this.set(e,!0),n();else{const n=Object.keys(e).reduce(((n,a)=>(n[a]=l[a]+(e[a]-l[a])*k(i/t),n)),{});this.set(n,!1),requestAnimationFrame(r)}};r(a)}));on=e=>(this.listeners.push(e),()=>this.listeners=this.listeners.filter((t=>t!==e)));stop=()=>{delete this.id};end=()=>{delete this.id,this.initialValues=f(this.values)}}Ee.defaultDuration=300;const fe=e=>t((()=>new Ee(e)),[]),ye=({children:t,onClose:n})=>{const a=l(null),c=fe({zoom:1,panX:0,panY:0});r((()=>c.on((e=>{a.current.style.transform=`scale(${e.zoom}) translateX(${e.panX/e.zoom}px) translateY(${e.panY/e.zoom}px)`}))),[]);const i=()=>{const e=a.current.querySelector("img"),t=e.clientWidth*c.values.zoom,n=e.clientHeight*c.values.zoom;return{maxPanX:t>a.current.clientWidth?(t-a.current.clientWidth)/2:0,maxPanY:n>a.current.clientHeight?(n-a.current.clientHeight)/2:0}};return X(a,{onCapture:e=>{const{maxPanX:t,maxPanY:n}=i();return"x"===e.direction&&t>0||("y"===e.direction&&n>0||!!e.pinch)},onPinch:e=>{const{maxPanX:t,maxPanY:n}=i(),a=c.initialValues.zoom*e.pinch.scale;c.set({zoom:a,panX:E(c.initialValues.panX,-t,t),panY:E(c.initialValues.panY,-n,n)},!1)},onMove:e=>{if("pinch"===e.locked)return;if(c.values.zoom<=1)return;const{maxPanX:t,maxPanY:n}=i();c.set({panX:t&&E(c.initialValues.panX+e.d.x,-t,t),panY:n&&E(c.initialValues.panY+e.d.y,-n,n)},!1)},onUp:e=>c.values.zoom<1?c.spring({zoom:1,panX:0,panY:0}):c.values.zoom>3?c.spring({zoom:3}):void c.end(),onDoubleTap:e=>{1===c.values.zoom?c.spring({zoom:3}):c.spring({zoom:1,panX:0,panY:0})}},[]),e.createElement("div",{className:"gallery-item",ref:a,children:t})},be=({icon:t,title:n,badge:a,loading:l,disabled:r,onClick:c,active:i,href:s})=>e.createElement(C,{className:v("header-button center","Cancel"===n&&"header-cancel"),onClick:c,loading:l,disabled:r,active:i,href:s},t?e.createElement(P,{icon:t}):null,n?e.createElement("span",null,n):null,a?e.createElement("span",{className:"badge"},a):null),ke=({ar:t,url:n,alt:a,className:l,children:r,base64Png:c})=>e.createElement("div",{className:v("img",l)},e.createElement("div",{style:{paddingTop:100*(t||1)+"%"}}),n?e.createElement("img",{src:n,className:"img-real",alt:a,draggable:!1}):c?e.createElement("img",{src:`data:image/png;base64,${c}`}):e.createElement("div",{className:"img-real",alt:a,draggable:!1}),r?e.createElement("div",{className:"img-inside"},r):null),Ne=({title:t,items:n=[],keyExtractor:a=(e=>e._id),renderItem:l,loading:r,className:i,ListEmptyComponent:o,HeaderComponent:d,children:m,showSeparators:u=!0})=>e.createElement("div",{className:v("list",i)},t?e.createElement(c,null,e.createElement("div",{className:"list-title"},t),e.createElement("hr",null)):null,d,n.length||m?e.createElement("div",{className:"list-body"},r||!n?null:o&&0===n.length?o:n.map(((t,r)=>e.createElement(c,{key:a(t)},l(t,r),u&&r<n.length-1&&e.createElement("hr",null)))),s.map(m,((t,n)=>e.createElement(c,{key:n},t,n<m.length-1&&e.createElement("hr",null))))):o),xe=u([]),Ce=t=>e.createElement("div",{key:t.id,className:"layer",children:t.children}),we=()=>h(xe).map(Ce),Me=e=>xe.update([...xe.state,{id:Math.random(),children:e}]),Pe=()=>{xe.update([])},ze=({title:t,LeftComponent:n,caret:a=!0,checked:l,active:r,href:c,onPress:i})=>e.createElement(C,{className:"filter-button",onClick:i,active:r,interactive:!0,href:c},n,t?e.createElement("div",{className:"filter-button-title"},t):null,a?e.createElement(P,{className:"filter-button-caret",icon:"expand_more"}):e.createElement(re,{active:l})),Le=({percent:t})=>e.createElement("div",{className:"percent-bar"},e.createElement("div",{className:"percent-bar-inner",style:{width:100*t+"%"}})),Se=({title:t,color:n,onClick:a})=>e.createElement(C,{className:"pill",onClick:a,style:{backgroundColor:n}},t),De=u(),Te=()=>{const t=h(De);return r((()=>{if(!t)return;const e=setTimeout((()=>De.update(null)),2e3);return()=>clearTimeout(e)}),[t]),t?e.createElement("div",{className:"toast-container"},e.createElement("div",{className:"toast",children:t})):null},Ye=De.update,Xe=()=>e.createElement(c,null,e.createElement(we,null),e.createElement(U,null),e.createElement(F,null),e.createElement(Te,null)),Ve=()=>e.createElement("div",{className:"progress-indicator"}),$e=({color:t="#fff",size:n=20,percent:a,spinning:l,completedIcon:r="check"})=>{if(l||!a)return e.createElement(Ve,null);if(1===a)return e.createElement(P,{icon:r});const c=n/2,i=c-1,s=2*i*Math.PI,o=s-a*s;return e.createElement("svg",{height:n,width:n},e.createElement("circle",{stroke:t,opacity:.3,fill:"transparent",strokeWidth:2,r:i,cx:c,cy:c}),e.createElement("circle",{strokeDasharray:s+" "+s,style:{strokeDashoffset:o,transform:"rotate(-90deg)",transformOrigin:"50% 50%"},stroke:t,fill:"transparent",strokeWidth:2,r:i,cx:c,cy:c}))},Re=({active:t,icon:n,title:a,elaboration:l,subtitle:r,value:c,disabled:i,onClick:s,children:o})=>e.createElement(z,{onClick:()=>{s(c)},disabled:i,className:"radio-btn",active:t},e.createElement("div",{className:"radio-top"},e.createElement("div",{className:"dot"},e.createElement("div",{className:"dot-inside"})),n&&e.createElement(P,{icon:n}),e.createElement("div",{className:"radio-title"},a)),o&&e.createElement("div",{className:"radio-subtitle"},o),r&&e.createElement("div",{className:"radio-subtitle"},r),t&&l&&e.createElement("div",{className:"radio-subtitle",children:l})),Ue=n((({item:t,isLast:n,active:a,onChange:l,index:r},i)=>e.createElement(c,null,e.createElement(C,{children:t.name,onClick:()=>l(t.value),active:a,ref:i}),n?null:e.createElement("div",{className:"separator"})))),je=({options:t,value:n,onChange:a})=>{const c=l([]),i=l(),s=t.findIndex((e=>e.value===n)),o=x(0),d=x(0);return r((()=>{o.on((e=>i.current.style.transform=`translateX(${e}px)`)),d.on((e=>i.current.style.width=`${e}px`))}),[]),r((()=>{const e=c.current[s];0===d.value?(o.setValue(e.offsetLeft),d.setValue(e.offsetWidth)):(o.spring(e.offsetLeft),d.spring(e.offsetWidth))}),[s]),e.createElement("div",{className:"segmented"},e.createElement("div",{className:"segmented-indicator",ref:i}),t.map(((n,l)=>e.createElement(Ue,{key:n.value,item:n,index:l,isLast:l===t.length-1,active:s===l,onChange:a,ref:e=>c.current[l]=e}))))},Oe=({options:t,value:n,disabled:a,autoComplete:l,onChangeValue:r})=>e.createElement("select",{className:v("text select",a&&"disabled"),onChange:e=>r(e.target.value),value:n,disabled:a,autoComplete:l},(()=>{if(t instanceof Array)return t.map((t=>e.createElement("option",{key:t.value,value:t.value,children:t.name})));Object.keys(t).map((n=>e.createElement("option",{key:n,value:n,children:t[n]})))})()),We=({leftText:t,rightText:n})=>e.createElement("div",{className:"tabular-row"},e.createElement("div",{className:"tabular-row-left"},t),e.createElement("div",{className:"tabular-row-right"},n)),Ie=(e,t=0)=>{let n=3735928559^t,a=1103547991^t;for(let t,l=0;l<e.length;l++)t=e.charCodeAt(l),n=Math.imul(n^t,2654435761),a=Math.imul(a^t,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(a^a>>>13,3266489909),a=Math.imul(a^a>>>16,2246822507),a^=Math.imul(n^n>>>13,3266489909),4294967296*(2097151&a)+(n>>>0)},_e=360/Math.pow(2,53),He=o((({tag:t,count:n})=>{const a=(e=>`hsl(${180-_e*Ie(e)}, 100%, 50%)`)(t);return e.createElement("div",{className:"tag",style:{borderColor:a,color:a},children:`${t}  ${n||""}`})})),Ae={code:"one-time-code"},Be={phone:"tel",code:"tel"},qe=n((({placeholder:t,value:n="",icon:l,type:r="text",dnt:c,disabled:i,rows:s=0,className:o,onFocus:m,autoComplete:u,onClick:h,maxLength:p,id:g,onChangeText:E=(()=>null),autoFocus:f,loading:y,RightComponent:b,countryCode:k,onChangePhone:N,lowerCase:x,min:w,max:M,onPressCountry:z,countries:L},S)=>{const[D,T]=a(n);return e.createElement("div",{className:"text-input"},"phone"===r&&(()=>{const t=L?L.find((e=>e.code===k)):null;return t?e.createElement(C,{className:"text-input-country",onClick:z},e.createElement("span",{className:"emoji"},t.flag),t.prefix):null})(),l?e.createElement(P,{className:"text-input-icon",icon:l}):"username"===r?e.createElement("span",{className:"text-input-icon"},"@"):"search"===r?e.createElement(P,{className:"text-input-icon",icon:"search"}):void 0,d("textarea"===r||s?"textarea":"input",{type:Be[r]||r,autoComplete:Ae[r],maxLength:p,className:v("text",i&&"disabled",c&&"fs-hide",o),readOnly:i,onChange:e=>{let t=e.target.value;T(t),"phone"===r?t=t.replace(/[^0-9]/g,""):(x&&(t=t.toLowerCase()),p&&(t=t.slice(0,p)),"username"===r&&(t=t.replace(/\s/g,""))),E(t)},value:(e=>{if("phone"===r&&k){const t=L.find((e=>e.code===k)),n=e.split("");return t.example.split("").map((e=>{if(n.length)return"X"===e?n.shift():e})).filter(Boolean).join("")}return e})(n),autoCapitalize:x&&"none",placeholder:t,rows:s,onFocus:m,onClick:h,id:g,autoFocus:f,ref:S,min:w,max:M}),l?e.createElement("img",{className:"text-input-icon",src:l}):null,b,y?e.createElement("div",{className:"text-input-spinner"},e.createElement(_,{size:18})):null,"search"!==r?null:n?e.createElement(C,{onClick:()=>E("")},e.createElement(P,{icon:"cancel",className:"text-input-clear"})):void 0)})),Fe=({href:t,onClick:n,children:a,disabled:l,className:r})=>e.createElement(C,{className:v("touchable-highlight",l&&"disabled",r),onClick:n,href:t,children:a}),Ke={capture:!1,passive:!1},Ge=(e=0,t,n)=>{const a=Math.min(n,50)/50;return e*(1-a)+t*a};let Je;const Qe=(e,t={},n)=>{const{width:a,height:c}=L(e),i=l({id:m()}).current;return r((()=>{if(!e.current)return;const n=e=>{const t=e-i.last.ts;if(t>0){const n=(i.x-i.last.x)/t,a=(i.y-i.last.y)/t;i.v={x:Ge(i.v.x,n,t),y:Ge(i.v.y,a,t)},i.last={x:i.x,y:i.y,ts:e}}},l=e=>{Je=null;const n=e.touches?e.touches[0].clientX:e.clientX,l=e.touches?e.touches[0].clientY:e.clientY;if(Object.assign(i,{width:a,height:c,current:{x:n,y:l},touch:!0,origin:{x:n,y:l},locked:!1,v:{x:0,y:0},s:{x:0,y:0},d:{x:0,y:0},flick:null,last:{ts:performance.now(),x:n,y:l}}),2!==e.touches.length)t.onDown&&t.onDown(i);else{const t=e.touches[0].clientX-e.touches[1].clientX,n=e.touches[0].clientY-e.touches[1].clientY;i.pinch={d0:Math.sqrt(Math.pow(t,2)+Math.pow(n,2))}}},r=a=>{if(!Je||Je===e.current){if(i.pinch)if(2===a.touches.length){i.locked="pinch";const e=a.touches[0].clientX-a.touches[1].clientX,n=a.touches[0].clientY-a.touches[1].clientY;i.pinch.d=Math.sqrt(Math.pow(e,2)+Math.pow(n,2)),i.pinch.scale=i.pinch.d/i.pinch.d0,i.pinch.center={x:(a.touches[0].clientX+a.touches[1].clientX)/2,y:(a.touches[0].clientY+a.touches[1].clientY)/2},t.onPinch&&t.onPinch(i)}else delete i.pinch;else i.x=a.touches?a.touches[0].clientX:a.clientX,i.y=a.touches?a.touches[0].clientY:a.clientY,n(a.timeStamp),i.d={x:i.x-i.origin.x,y:i.y-i.origin.y},i.abs={x:Math.abs(i.d.x),y:Math.abs(i.d.y)},!i.locked&&(i.abs.y>10||i.abs.x>10)&&(i.locked=i.abs.y>i.abs.x?"v":"h");if(i.locked){if("h"===i.locked&&(i.distance=i.d.x),"v"===i.locked&&(i.distance=i.d.y),i.touch=(e=>!t.onCapture||t.onCapture(i,e))(a),!i.touch)return;Je=e.current,t.onMove&&t.onMove(i,a)}}},s=a=>{Je&&Je!==e.current||i.touch&&i.locked&&(n(a.timeStamp),i.s={x:Math.abs(i.v.x),y:Math.abs(i.v.y)},i.flick={x:"h"===i.locked&&i.s.x>=.25&&Math.sign(i.v.x),y:"v"===i.locked&&i.s.y>=.25&&Math.sign(i.v.y)},t.onUp&&t.onUp(i))},o=n=>{e.current.scrollTop+=n.deltaY,t.onPan&&t.onPan({d:{x:n.deltaX,y:n.deltaY}})};return e.current.addEventListener("touchstart",l,Ke),e.current.addEventListener("touchmove",r,Ke),e.current.addEventListener("touchend",s,Ke),e.current.addEventListener("wheel",o,Ke),t.onDoubleTap&&e.current.addEventListener("dblclick",t.onDoubleTap,Ke),()=>{e.current&&(e.current.removeEventListener("touchstart",l),e.current.removeEventListener("touchmove",r),e.current.removeEventListener("touchend",s),e.current.removeEventListener("wheel",o),t.onDoubleTap&&e.current.removeEventListener("dblclick",t.onDoubleTap))}}),[e,c,a,n]),{height:c,width:a}},Ze=({pan:t,i:n})=>{const a=l();return r((()=>t.on((e=>{const t=Math.abs(n-e);a.current.style.opacity=Math.max(.5,1-t)}))),[]),e.createElement("div",{className:"pager-dot",ref:a,style:{opacity:t.value===n?1:.5}})},et=({title:t,i:n,pan:a,onPress:c})=>{const i=l();return r((()=>a.on((e=>{const t=Math.abs(n-e);i.current.style.opacity=Math.max(.5,1-t)}))),[]),e.createElement("div",{children:t,className:"pager-tabs-title",onClick:()=>c(n),ref:i,style:{opacity:a.value===n?1:.5}})},tt=n((({titles:t,children:n,vertical:a,dots:c,className:o,page:d=0},m)=>{const u=x(d),h=l(),p=l(),f=l({}).current,y=s.count(n)-1,b=a?"y":"x",k=e=>E(e,0,y);i(m,(()=>({scrollToPage:e=>u.spring(e)})));const{width:N,height:C}=X(p,{enablePointerControls:!0,onCapture:e=>{if(e.direction===b)return e.distance<0||f.initPan-e.distance/e.size>0},onDown:e=>{f.currentPage=Math.round(u.value),f.initPan=u.value},onMove:e=>{const t=k(f.initPan-e.distance/e.size);u.setValue(t)},onPan:e=>{u.setValue(k(u.value+e.d.x/N))},onUp:e=>{if(e.flickedLeft||e.flickedDown)f.currentPage<y&&u.spring(f.currentPage+1,e.springMs);else if(e.flickedRight||e.flickedUp)f.currentPage>0&&u.spring(f.currentPage-1,e.springMs);else{const e=k(Math.round(u.value));u.spring(e)}}},[n]);return r((()=>{u.spring(d)}),[d]),r((()=>u.on((e=>{a?p.current.style.transform=`translateY(-${e*C}px)`:(p.current.style.transform=`translateX(-${e*N}px)`,h.current&&(h.current.style.transform=`translateX(${g(e)})`))}))),[a,C,N]),e.createElement("div",{className:v("pager",a?"vertical":"horizontal",o)},t?e.createElement("div",{className:"pager-tabs"},t.map(((t,n)=>e.createElement(et,{key:n,title:t,pan:u,i:n,onPress:u.spring}))),N?e.createElement("div",{className:"pager-tabs-indicator",ref:h,style:{width:g(1/t.length)}}):null):null,e.createElement("div",{className:"pager-scroller"},e.createElement("div",{className:"pager-canvas",ref:p,style:{transform:a?`translateY(-${g(d)})`:`translateX(-${g(d)})`}},s.map(n,((t,n)=>e.createElement("div",{key:n,className:"pager-page",children:t}))))),c?e.createElement("div",{className:"pager-dots"},s.map(n,((t,n)=>e.createElement(Ze,{key:n,pan:u,i:n})))):null)})),nt=n((({children:t,title:n,search:a,onChangeSearch:c,searchLoading:s,hasScrollView:o=!0,headerRight:d,onClose:m,isVisible:u,presentation:h="modal"},v)=>{const g=l(),E=l(),f=x(0),y=()=>{m?f.spring(0).then(m):p.goBack(1)};i(v,(()=>({close:y})));const{height:b}=X(E,{onCapture:e=>"y"===e.direction&&e.distance>0,onMove:e=>{f.setValue(b-Math.max(0,e.distance))},onUp:e=>{if(e.flickedDown)return y();f.spring(e.size)}});return r((()=>{b&&(u||m?f.spring(b):f.spring(0))}),[u,b]),r((()=>{const e=document.querySelectorAll(".card");return f.on((t=>{const n=t/b;E.current&&(E.current.style.transform=`translateY(-${t}px)`),g.current&&(g.current.style.display=t?"block":"none",g.current.style.opacity=t/b),[...e].forEach((e=>{e.style.transform=`scale(${1-.04*n})`}))}))}),[b]),e.createElement("div",{className:"layer"},e.createElement("div",{className:`shade shade-${h}`,ref:g}),e.createElement("div",{className:`window window-${h}`,ref:E},"modal"===h?e.createElement(Q,{title:n,presentation:"modal",onClose:y,SearchComponent:c?e.createElement("div",{className:"header-search"},e.createElement(qe,{placeholder:"Search",type:"search",value:a,onChangeText:c,loading:s})):null,headerRight:d}):null,o?e.createElement(W,{className:"card-body",children:t}):e.createElement("div",{className:"card-body",children:t})))})),at=new Map,lt=e=>function(...t){const n=t[0];return at.has(n)||at.set(n,e.apply(this,t)),at.get(n)},rt=lt((e=>new Promise((t=>{const n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n.onload=()=>t(),document.head.appendChild(n)})))),ct=lt(((e,t)=>new Promise((n=>{const a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,a.onload=()=>n(window[t]),document.head.appendChild(a)})))),it=({width:e,height:t})=>{document.documentElement.style.setProperty("--viewport-width",`${e}px`),document.documentElement.style.setProperty("--viewport-height",`${t}px`)};it({width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}),new ResizeObserver((e=>{it(e[0].contentRect)})).observe(document.documentElement);const st=navigator.virtualKeyboard,ot=()=>r((()=>{if(st)return st.overlaysContent=!0,()=>st.overlaysContent=!1}),[]);export{U as ActionSheet,_ as ActivityIndicator,F as Alert,N as AnimatedValue,Ee as Animation,le as Avatar,V as BottomSheet,G as BreadCrumbs,H as Button,te as Card,re as CheckBox,ne as CircleCheck,ae as ConnectionIndicator,ce as CornerDialog,me as DashboardIcon,pe as Dropdown,he as DropdownItem,ue as Emoji,ve as Fab,ze as FilterButton,ge as FullScreen,ye as GalleryItem,be as HeaderButton,P as Icon,ke as Image,Ne as List,we as Modal,Le as PercentBar,Se as Pill,Z as Placeholder,Xe as PoonOverlays,Ve as ProgressIndicator,$e as ProgressRing,O as PullIndicator,Re as RadioButton,se as Reveal,Q as ScreenHeader,W as ScrollView,je as SegmentedController,Oe as Select,ee as Shade,We as TabularRow,He as Tag,qe as TextInput,Te as Toast,C as Touchable,Fe as TouchableHighlight,z as TouchableRow,tt as ViewPager,nt as Window,b as bounce,v as c,E as clamp,f as clone,Ie as cyrb53,k as easeOutCubic,Pe as hideModal,rt as loadCss,ct as loadScript,lt as memoize,xe as modalState,y as sameObject,oe as setRevealOrigin,j as showActionSheet,K as showAlert,Me as showModal,g as toPercent,Ye as toast,x as useAnimatedValue,fe as useAnimation,X as useGesture,Qe as usePanGestures,L as useSize,ot as useVirtualKeyboard};
